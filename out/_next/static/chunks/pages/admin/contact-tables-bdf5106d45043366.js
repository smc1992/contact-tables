(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7137],{87059:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return p},default:function(){return j}});var n=s(59499),r=s(50029),a=s(64687),i=s.n(a),l=s(92401),c=s(11163),d=s(89681),o=s(91472),m=s(63708),u=s(17662),x=s(39920),h=s(5802);function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var p=!0;function j(e){e.user;var t,s=(0,c.useRouter)(),a=(0,l.useState)([]),f=a[0],p=a[1],j=(0,l.useState)(!0),g=j[0],y=j[1],v=(0,l.useState)(null),N=v[0],w=v[1],k=(0,l.useState)({date:"",city:"",minSeats:"1"}),O=k[0],S=k[1],P=(0,l.useState)(!1),_=P[0],E=P[1];(0,l.useEffect)(function(){var e;(e=(0,r.Z)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),t=b(b({},O),{},{minSeats:O.minSeats?parseInt(O.minSeats,10):void 0}),e.next=5,x.eJ.getRequests(t);case 5:p(e.sent.contactTables||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Fehler beim Abrufen der Kontakttische:",e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])})),function(){return e.apply(this,arguments)})()},[O]);var F=function(e){var t=e.target,s=t.name,r=t.value;S(function(e){return b(b({},e),{},(0,n.Z)({},s,r))})},D=(t=(0,r.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Sind Sie sicher, dass Sie diesen Kontakttisch l\xf6schen m\xf6chten?")){e.next=15;break}return e.prev=1,w(t),e.next=5,x.eJ.deleteRequest(t);case 5:p(function(e){return e.filter(function(e){return e.id!==t})}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Fehler beim L\xf6schen des Kontakttisches:",e.t0),alert("Fehler beim L\xf6schen des Kontakttisches");case 12:return e.prev=12,w(null),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,8,12,15]])})),function(e){return t.apply(this,arguments)});return(0,h.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,h.jsx)(m.Z,{}),(0,h.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,h.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin: Alle Kontakttische"}),(0,h.jsxs)("button",{onClick:function(){return E(!_)},className:"flex items-center px-4 py-2 bg-gray-100 rounded-md text-gray-700 hover:bg-gray-200 transition-colors",children:[(0,h.jsx)(o.Ihx,{className:"mr-2"}),"Filter ",_?"ausblenden":"anzeigen"]})]}),_&&(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Filter"}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,h.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,h.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Datum"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)(o.vlc,{className:"text-gray-400"})}),(0,h.jsx)("input",{type:"date",id:"date",name:"date",value:O.date,onChange:F,className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,h.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,h.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stadt"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)(o.i63,{className:"text-gray-400"})}),(0,h.jsx)("input",{type:"text",id:"city",name:"city",value:O.city,onChange:F,placeholder:"z.B. Berlin",className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,h.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,h.jsx)("label",{htmlFor:"minSeats",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min. freie Pl\xe4tze"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)(o.WY8,{className:"text-gray-400"})}),(0,h.jsxs)("select",{id:"minSeats",name:"minSeats",value:O.minSeats,onChange:F,className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,h.jsx)("option",{value:"1",children:"Mindestens 1"}),(0,h.jsx)("option",{value:"2",children:"Mindestens 2"}),(0,h.jsx)("option",{value:"3",children:"Mindestens 3"}),(0,h.jsx)("option",{value:"4",children:"Mindestens 4"}),(0,h.jsx)("option",{value:"5",children:"Mindestens 5"})]})]})]})]})]}),(0,h.jsx)("div",{className:"space-y-6",children:g?(0,h.jsxs)("div",{className:"text-center py-10",children:[(0,h.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,h.jsx)("p",{className:"mt-2 text-gray-600",children:"Kontakttische werden geladen..."})]}):0===f.length?(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,h.jsx)(o.H33,{className:"mx-auto text-gray-400 text-4xl mb-4"}),(0,h.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Keine Kontakttische gefunden"}),(0,h.jsx)("p",{className:"text-gray-600",children:"Es wurden keine Kontakttische gefunden, die den Filterkriterien entsprechen."})]}):f.map(function(e){return(0,h.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,h.jsxs)("div",{className:"p-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-start",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.title}),(0,h.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(o.vlc,{className:"mr-2 text-blue-600"}),new Date(e.datetime).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(o.WY8,{className:"mr-2 text-blue-600"}),e.participants.length," / ",e.maxParticipants," Teilnehmer"]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(o.i63,{className:"mr-2 text-blue-600"}),e.restaurant.name,", ",e.restaurant.city]})]})]}),(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("OPEN"===e.status?"bg-green-100 text-green-800":"FULL"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"OPEN"===e.status?"Offen":"FULL"===e.status?"Voll":"Vergangen"})})]}),(0,h.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,h.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Teilnehmer:"}),(0,h.jsx)("ul",{className:"space-y-2",children:e.participants.map(function(e){return(0,h.jsxs)("li",{className:"flex items-center text-sm",children:[(0,h.jsx)("span",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-2",children:e.user.name.charAt(0)}),(0,h.jsx)("span",{children:e.user.name}),e.isHost&&(0,h.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-600 rounded text-xs",children:"Host"})]},e.id)})})]}),(0,h.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,h.jsx)("button",{onClick:function(){return D(e.id)},disabled:N===e.id,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:N===e.id?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"L\xf6schen..."]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.Ybf,{className:"mr-2"}),"L\xf6schen"]})}),(0,h.jsx)("button",{onClick:function(){return s.push("/contact-tables/".concat(e.id))},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Details anzeigen"})]})]})},e.id)})})]})}),(0,h.jsx)(u.Z,{})]})}},92773:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/contact-tables",function(){return s(87059)}])}},function(e){e.O(0,[6130,3365,6058,6405,8428,300,6308,3708,5502,2888,9774,179],function(){return e(e.s=92773)}),_N_E=e.O()}]);