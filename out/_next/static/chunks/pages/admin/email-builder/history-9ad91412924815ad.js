(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9430],{95443:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(92401),r=s(41664),n=s.n(r),i=s(11163),l=s(89681),c=s(91472),d=s(5802);function o(e){var t=e.activeItem,s=void 0===t?"dashboard":t,r=(0,i.useRouter)(),o=(0,a.useState)(!1),x=o[0],m=o[1],h=[{icon:c.m6D,label:"Dashboard",id:"dashboard",path:"/admin/dashboard"},{icon:c.LSm,label:"Partneranfragen",id:"partner-requests",path:"/admin/partner-requests"},{icon:c.SnF,label:"Restaurants",id:"restaurants",path:"/admin/restaurants"},{icon:c.orK,label:"Kontakttisch-Analysen",id:"contact-tables-analytics",path:"/admin/contact-tables/analytics"},{icon:c.bfl,label:"Moderation",id:"moderation",path:"/admin/moderation/reviews"},{icon:c.zFh,label:"Abonnements",id:"subscriptions",path:"/admin/subscriptions"},{icon:c.aCJ,label:"Kategorien",id:"categories",path:"/admin/categories"},{icon:c.E25,label:"Ausstattung",id:"amenities",path:"/admin/amenities"},{icon:c.i63,label:"St\xe4dte",id:"cities",path:"/admin/cities"},{icon:c.WY8,label:"Benutzer",id:"users",path:"/admin/users",useRouterPush:!0},{icon:c.NOg,label:"Blogs",id:"blogs",path:"/admin/blogs"},{icon:c.Imn,label:"Newsletter",id:"newsletter",path:"/admin/newsletters"},{icon:c.Imn,label:"E-Mail-Builder",id:"email-builder",path:"/admin/email-builder"},{icon:c.nbt,label:"Einstellungen",id:"settings",path:"/admin/settings"}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed bottom-4 right-4 md:hidden z-30",children:(0,d.jsx)("button",{onClick:function(){return m(!x)},className:"bg-primary-600 text-white p-3 rounded-full shadow-lg",children:x?(0,d.jsx)(c.q5L,{size:24}):(0,d.jsx)(c.cur,{size:24})})}),(0,d.jsx)(l.E.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",initial:{opacity:0},animate:{opacity:x?1:0},transition:{duration:.2},style:{pointerEvents:x?"auto":"none"},children:(0,d.jsxs)(l.E.div,{className:"fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-30 overflow-y-auto",initial:{x:"-100%"},animate:{x:x?0:"-100%"},transition:{duration:.3},children:[(0,d.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Admin"}),(0,d.jsx)("button",{onClick:function(){return m(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,d.jsx)(c.q5L,{size:24})})]})}),(0,d.jsx)("nav",{className:"p-4",children:(0,d.jsx)("ul",{className:"space-y-2",children:h.map(function(e){var t=e.icon,a=s===e.id;return(0,d.jsx)("li",{children:e.useRouterPush?(0,d.jsxs)("div",{className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors cursor-pointer ".concat(a?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),onClick:function(){console.log("AdminSidebar (Mobile): Router.push zu ".concat(e.label," (").concat(e.path,")")),r.push(e.path),m(!1)},children:[(0,d.jsx)(t,{size:20}),(0,d.jsx)("span",{children:e.label}),"partner-requests"===e.id&&(0,d.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"Neu"})]}):(0,d.jsxs)(n(),{href:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(a?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),onClick:function(){console.log("AdminSidebar (Mobile): Link zu ".concat(e.label," (").concat(e.path,") geklickt")),m(!1)},children:[(0,d.jsx)(t,{size:20}),(0,d.jsx)("span",{children:e.label}),"partner-requests"===e.id&&(0,d.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"Neu"})]})},e.id)})})})]})}),(0,d.jsx)("aside",{className:"hidden md:block w-64 bg-white shadow-md min-h-screen pt-20",children:(0,d.jsx)("nav",{className:"p-4",children:(0,d.jsx)("ul",{className:"space-y-2",children:h.map(function(e){var t=e.icon,a=s===e.id;return(0,d.jsx)("li",{children:e.useRouterPush?(0,d.jsxs)("div",{className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors cursor-pointer ".concat(a?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),onClick:function(){console.log("AdminSidebar (Desktop): Router.push zu ".concat(e.label," (").concat(e.path,")")),r.push(e.path)},children:[(0,d.jsx)(t,{size:20}),(0,d.jsx)("span",{children:e.label}),"partner-requests"===e.id&&(0,d.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"Neu"})]}):(0,d.jsxs)(n(),{href:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(a?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),onClick:function(){console.log("AdminSidebar (Desktop): Link zu ".concat(e.label," (").concat(e.path,") geklickt"))},children:[(0,d.jsx)(t,{size:20}),(0,d.jsx)("span",{children:e.label}),"partner-requests"===e.id&&(0,d.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"Neu"})]})},e.id)})})})})]})}},17662:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(41664),r=s.n(a),n=s(25675),i=s.n(n),l=s(91472),c=s(41338),d=s(5802);function o(){return(0,d.jsx)("footer",{className:"bg-gradient-to-br from-neutral-900 to-neutral-800 text-neutral-300",children:(0,d.jsxs)("div",{className:"container mx-auto py-16 px-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(r(),{href:"/",className:"inline-block",children:(0,d.jsx)("div",{className:"flex items-center space-x-3 group",children:(0,d.jsx)("div",{className:"h-12 bg-white p-2 rounded-lg overflow-hidden relative",children:(0,d.jsx)(i(),{src:"/images/logo-fixed/Logo CT quer 4c.webp",alt:"Contact Tables Logo",width:120,height:40,className:"transition-all group-hover:scale-105",priority:!0,style:{objectFit:"contain",width:"auto",height:"100%"},quality:100})})})}),(0,d.jsx)("p",{className:"text-neutral-400 leading-relaxed",children:"Wir verbinden Menschen am Restauranttisch â€“ f\xfcr echte Begegnungen und inspirierende Gespr\xe4che."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Entdecken"}),(0,d.jsxs)("ul",{className:"space-y-4",children:[(0,d.jsx)("li",{children:(0,d.jsxs)(r(),{href:"/restaurants",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,d.jsx)(l.i63,{className:"group-hover:translate-x-1 transition-transform"}),(0,d.jsx)("span",{children:"Restaurants finden"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(r(),{href:"/about",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,d.jsx)(l.WY8,{className:"group-hover:translate-x-1 transition-transform"}),(0,d.jsx)("span",{children:"\xdcber uns"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(r(),{href:"/restaurant/register",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,d.jsx)(l.i63,{className:"group-hover:translate-x-1 transition-transform"}),(0,d.jsx)("span",{children:"Restaurant anmelden"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(r(),{href:"/events",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,d.jsx)(l.TCC,{className:"group-hover:translate-x-1 transition-transform"}),(0,d.jsx)("span",{children:"Events & Aktionen"})]})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Rechtliches"}),(0,d.jsxs)("ul",{className:"space-y-4",children:[(0,d.jsx)("li",{children:(0,d.jsx)(r(),{href:"/datenschutz",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Datenschutzerkl\xe4rung"})}),(0,d.jsx)("li",{children:(0,d.jsx)(r(),{href:"/faq",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"FAQ"})}),(0,d.jsx)("li",{children:(0,d.jsx)(r(),{href:"/impressum",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Impressum"})}),(0,d.jsx)("li",{children:(0,d.jsx)(r(),{href:"/barrierefreiheit",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Barrierefreiheit"})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Kontakt"}),(0,d.jsxs)("ul",{className:"space-y-4",children:[(0,d.jsx)("li",{className:"group",children:(0,d.jsxs)("a",{href:"tel:+4915679640069",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,d.jsx)(l.tUt,{size:16})}),(0,d.jsx)("span",{children:"+49 15679 640069"})]})}),(0,d.jsx)("li",{className:"group",children:(0,d.jsxs)(r(),{href:"/contact",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,d.jsx)(l.Imn,{size:16})}),(0,d.jsx)("span",{children:"Nachricht absenden"})]})}),(0,d.jsx)("li",{className:"group",children:(0,d.jsxs)("a",{href:"https://www.facebook.com/contacttables/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,d.jsx)(c.tBk,{size:16})}),(0,d.jsx)("span",{children:"Facebook"})]})}),(0,d.jsx)("li",{className:"group",children:(0,d.jsxs)("a",{href:"https://www.instagram.com/contacttables/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,d.jsx)(c.Zf_,{size:16})}),(0,d.jsx)("span",{children:"Instagram"})]})})]})]})]}),(0,d.jsx)("div",{className:"border-t border-neutral-800 mt-16 pt-8 text-center",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,d.jsxs)("p",{className:"text-neutral-500",children:["\xa9 ",new Date().getFullYear()," contact-tables. Alle Rechte vorbehalten."]}),(0,d.jsxs)("p",{className:"flex items-center text-neutral-500",children:[(0,d.jsx)("span",{children:"Made with"})," ",(0,d.jsx)(l.$aX,{className:"mx-2 text-primary-500"})," ",(0,d.jsx)("span",{children:"in Germany"})]})]})})]})})}},95991:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return j}});var a=s(50029),r=s(64687),n=s.n(r),i=s(92401),l=s(11163),c=s(87553),d=s(65289),o=s(63708),x=s(17662),m=s(95443),h=s(41664),u=s.n(h),p=s(91472),g=s(82249),f=s(5802),j=!0;t.default=function(){(0,l.useRouter)(),(0,d.useAuth)().user;var e,t,s,r,h,j=(0,i.useState)([]),b=j[0],y=j[1],N=(0,i.useState)(!0),v=N[0],w=N[1],k=(0,i.useState)(null),E=k[0],z=k[1],C=(0,i.useState)([]),P=C[0],S=C[1],_=(0,i.useState)(!1),F=_[0],A=_[1],L=(0,i.useState)({total:0,page:1,pageSize:10,totalPages:0}),R=L[0],M=L[1],D=(0,i.useState)(null),K=D[0],B=D[1],I=(0,i.useState)([]),T=I[0],q=I[1],G=(0,i.useState)(!1),Z=G[0],W=G[1],$=(0,i.useState)({total:0,page:1,pageSize:5,totalPages:0}),O=$[0],U=$[1],Y=(0,i.useState)(!1),X=Y[0],J=Y[1],V=(0,c.createClient)(),H=(t=(0,a.Z)(n().mark(function e(){var t,s,a,r=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:R.page,w(!0),e.prev=2,e.next=5,fetch("/api/admin/emails/history?page=".concat(t,"&pageSize=").concat(R.pageSize));case 5:return s=e.sent,e.next=8,s.json();case 8:if(a=e.sent,s.ok){e.next=11;break}throw Error(a.message||"Fehler beim Laden der Kampagnen");case 11:y(a.data.campaigns||[]),M(a.data.pagination),E&&!a.data.campaigns.find(function(e){return e.id===E.id})&&(z(null),S([])),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.error("Fehler beim Laden der E-Mail-Kampagnen:",e.t0),g.toast.error("Kampagnen konnten nicht geladen werden");case 20:return e.prev=20,w(!1),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[2,16,20,23]])})),function(){return t.apply(this,arguments)}),Q=(s=(0,a.Z)(n().mark(function e(t){var s,a,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,e.next=4,V.from("email_recipients").select("*").eq("campaign_id",t).order("sent_at",{ascending:!0});case 4:if(a=(s=e.sent).data,!(r=s.error)){e.next=9;break}throw r;case 9:S(a||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Fehler beim Laden der Empf\xe4nger:",e.t0),g.toast.error("Empf\xe4nger konnten nicht geladen werden");case 16:return e.prev=16,A(!1),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[1,12,16,19]])})),function(e){return s.apply(this,arguments)}),ee=(r=(0,a.Z)(n().mark(function e(t){var s,a,r,i=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.length>1&&void 0!==i[1]?i[1]:O.page,W(!0),e.prev=2,e.next=5,fetch("/api/admin/emails/batches?campaignId=".concat(t,"&page=").concat(s,"&pageSize=").concat(O.pageSize));case 5:return a=e.sent,e.next=8,a.json();case 8:if(r=e.sent,a.ok){e.next=11;break}throw Error(r.message||"Fehler beim Laden der Batches");case 11:q(r.data.batches||[]),U(r.data.pagination),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Fehler beim Laden der Batches:",e.t0),g.toast.error("Batches konnten nicht geladen werden");case 19:return e.prev=19,W(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,15,19,22]])})),function(e){return r.apply(this,arguments)}),et=(h=(0,a.Z)(n().mark(function e(t){var s,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("M\xf6chten Sie diese Kampagne wirklich l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.")){e.next=2;break}return e.abrupt("return");case 2:return B(t),e.prev=3,e.next=6,fetch("/api/admin/emails/history?id=".concat(t),{method:"DELETE"});case 6:return s=e.sent,e.next=9,s.json();case 9:if(a=e.sent,s.ok){e.next=12;break}throw Error(a.message||"Fehler beim L\xf6schen der Kampagne");case 12:g.toast.success("Kampagne erfolgreich gel\xf6scht"),H(),(null==E?void 0:E.id)===t&&(z(null),S([])),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.error("Fehler beim L\xf6schen der Kampagne:",e.t0),g.toast.error("Kampagne konnte nicht gel\xf6scht werden");case 21:return e.prev=21,B(null),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[3,17,21,24]])})),function(e){return h.apply(this,arguments)}),es=function(e){e<1||e>R.totalPages||H(e)};(0,i.useEffect)(function(){H(1)},[]);var ea=function(e){z(e),Q(e.id),"scheduled"===e.status||e.hasBatches?(J(!0),ee(e.id)):(J(!1),q([]))},er=function(e){e<1||e>O.totalPages||!E||ee(E.id,e)},en=function(e){if(!e)return"-";var t=new Date(e);return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},ei=function(e){switch(e){case"draft":return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,f.jsx)(p.TCC,{className:"mr-1"}),"Entwurf"]});case"sending":return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,f.jsx)(p.Bw1,{className:"mr-1 animate-spin"}),"Wird gesendet"]});case"scheduled":return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[(0,f.jsx)(p.TCC,{className:"mr-1"}),"Geplant"]});case"sent":return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,f.jsx)(p.UgA,{className:"mr-1"}),"Gesendet"]});case"partial":return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,f.jsx)(p.BJv,{className:"mr-1"}),"Teilweise gesendet"]});case"failed":return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,f.jsx)(p.q5L,{className:"mr-1"}),"Fehlgeschlagen"]});default:return(0,f.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,f.jsx)(p.H33,{className:"mr-1"}),e]})}};return(0,f.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,f.jsx)(o.Z,{}),(0,f.jsxs)("div",{className:"flex flex-1",children:[(0,f.jsx)(m.Z,{activeItem:"email-builder"}),(0,f.jsx)("main",{className:"flex-1 p-6 bg-gray-50",children:(0,f.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"E-Mail-Verlauf"}),(0,f.jsx)("p",{className:"text-sm text-gray-500",children:"\xdcbersicht aller gesendeten E-Mail-Kampagnen"})]}),(0,f.jsxs)("div",{className:"flex space-x-3",children:[(0,f.jsxs)(u(),{href:"/admin/email-builder",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[(0,f.jsx)(p.Imn,{className:"mr-2"}),"Neue E-Mail erstellen"]}),(0,f.jsx)("button",{onClick:function(e){return H()},disabled:v,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center ".concat(v?"opacity-70 cursor-not-allowed":""),children:v?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Bw1,{className:"animate-spin mr-2"}),"Wird aktualisiert..."]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Bw1,{className:"mr-2"}),"Aktualisieren"]})})]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,f.jsx)("div",{className:"lg:col-span-1",children:(0,f.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:[(0,f.jsx)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:(0,f.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Kampagnen"})}),v?(0,f.jsx)("div",{className:"p-6 flex justify-center",children:(0,f.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500"})}):0===b.length?(0,f.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Keine E-Mail-Kampagnen gefunden"}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("ul",{className:"divide-y divide-gray-200 max-h-[500px] overflow-y-auto",children:b.map(function(e){return(0,f.jsxs)("li",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer ".concat((null==E?void 0:E.id)===e.id?"bg-indigo-50":""),children:[(0,f.jsxs)("div",{className:"flex justify-between items-start",children:[(0,f.jsxs)("div",{className:"flex-1 min-w-0",onClick:function(){return ea(e)},children:[(0,f.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.subject}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:en(e.created_at)})]}),(0,f.jsxs)("div",{className:"ml-2 flex items-center space-x-2",children:[ei(e.status),(0,f.jsx)("button",{onClick:function(t){t.stopPropagation(),et(e.id)},disabled:K===e.id,className:"text-gray-400 hover:text-red-500 focus:outline-none",title:"Kampagne l\xf6schen",children:K===e.id?(0,f.jsx)(p.Bw1,{className:"animate-spin h-4 w-4"}):(0,f.jsx)(p.Ybf,{className:"h-4 w-4"})})]})]}),(0,f.jsxs)("div",{className:"mt-2 flex justify-between text-xs text-gray-500",onClick:function(){return ea(e)},children:[(0,f.jsxs)("span",{children:["Empf\xe4nger: ",e.stats.total]}),(0,f.jsxs)("span",{children:["Gesendet: ",e.stats.sent]}),(0,f.jsxs)("span",{children:["Fehler: ",e.stats.failed]})]})]},e.id)})}),R.totalPages>1&&(0,f.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,f.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,f.jsx)("button",{onClick:function(e){e.preventDefault(),es(R.page-1)},disabled:1===R.page,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 ".concat(1===R.page?"opacity-50 cursor-not-allowed":""),children:"Zur\xfcck"}),(0,f.jsx)("button",{onClick:function(e){e.preventDefault(),es(R.page+1)},disabled:R.page===R.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 ".concat(R.page===R.totalPages?"opacity-50 cursor-not-allowed":""),children:"Weiter"})]}),(0,f.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,f.jsx)("div",{children:(0,f.jsxs)("p",{className:"text-sm text-gray-700",children:["Seite ",(0,f.jsx)("span",{className:"font-medium",children:R.page})," von ",(0,f.jsx)("span",{className:"font-medium",children:R.totalPages})]})}),(0,f.jsx)("div",{children:(0,f.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,f.jsxs)("button",{onClick:function(e){e.preventDefault(),es(R.page-1)},disabled:1===R.page,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 ".concat(1===R.page?"opacity-50 cursor-not-allowed":""),children:[(0,f.jsx)("span",{className:"sr-only",children:"Zur\xfcck"}),(0,f.jsx)(p.YFh,{className:"h-5 w-5"})]}),Array.from({length:Math.min(5,R.totalPages)},function(e,t){var s;return s=R.totalPages<=5?t+1:R.page<=3?t+1:R.page>=R.totalPages-2?R.totalPages-4+t:R.page-2+t,(0,f.jsx)("button",{onClick:function(e){e.preventDefault(),es(s)},className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(R.page===s?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:s},s)}),(0,f.jsxs)("button",{onClick:function(e){e.preventDefault(),es(R.page+1)},disabled:R.page===R.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 ".concat(R.page===R.totalPages?"opacity-50 cursor-not-allowed":""),children:[(0,f.jsx)("span",{className:"sr-only",children:"Weiter"}),(0,f.jsx)(p.Tfp,{className:"h-5 w-5"})]})]})})]})]})]})]})}),(0,f.jsx)("div",{className:"lg:col-span-2",children:E?(0,f.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[(0,f.jsx)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:(0,f.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Kampagnendetails"})}),(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:E.subject}),(0,f.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"font-medium",children:"Status:"})," ",ei(E.status)]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"font-medium",children:"Erstellt:"})," ",en(E.created_at)]}),E.completed_at&&(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"font-medium",children:"Abgeschlossen:"})," ",en(E.completed_at)]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"font-medium",children:"Absender:"})," ",E.sender.name," (",E.sender.email,")"]}),E.template_id&&(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"font-medium",children:"Template-ID:"})," ",E.template_id]})]})]}),E.processing_time&&(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Leistungsmetriken"}),(0,f.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,f.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-lg text-center",children:[(0,f.jsxs)("div",{className:"text-xl font-bold text-indigo-700",children:[E.processing_time.toFixed(2),"s"]}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"Verarbeitungszeit"})]}),(0,f.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-lg text-center",children:[(0,f.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:(null===(e=E.send_rate)||void 0===e?void 0:e.toFixed(2))||"0"}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"E-Mails/Sekunde"})]}),(0,f.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-lg text-center",children:[(0,f.jsxs)("div",{className:"text-xl font-bold text-indigo-700",children:[E.stats.total>0?(E.stats.sent/E.stats.total*100).toFixed(1):"0","%"]}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"Erfolgsrate"})]})]})]}),(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Statistik"}),(0,f.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,f.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:E.stats.total}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"Empf\xe4nger"})]}),(0,f.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-green-700",children:E.stats.sent}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"Erfolgreich"})]}),(0,f.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg text-center",children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-red-700",children:E.stats.failed}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"Fehlgeschlagen"})]}),(0,f.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg text-center",children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-yellow-700",children:E.stats.skipped||0}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\xdcbersprungen"})]}),(0,f.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,f.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:[E.stats.openRate,"%"]}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\xd6ffnungsrate"})]})]})]}),X&&(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,f.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Geplante Batches"}),(0,f.jsxs)("button",{onClick:function(){return ee(E.id)},disabled:Z,className:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center",children:[Z?(0,f.jsx)(p.Bw1,{className:"mr-1 animate-spin",size:12}):(0,f.jsx)(p.Bw1,{className:"mr-1",size:12}),"Aktualisieren"]})]}),Z?(0,f.jsx)("div",{className:"p-4 flex justify-center",children:(0,f.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"})}):0===T.length?(0,f.jsx)("div",{className:"p-4 text-center text-gray-500 border rounded-md",children:"Keine Batches gefunden"}):(0,f.jsxs)("div",{className:"border rounded-md overflow-hidden",children:[(0,f.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,f.jsx)("thead",{className:"bg-gray-50",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Geplant f\xfcr"}),(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empf\xe4nger"}),(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fortschritt"})]})}),(0,f.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(function(e){var t=e.recipient_count>0?Math.round((e.sent_count+e.failed_count)/e.recipient_count*100):0;return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:en(e.scheduled_time)}),(0,f.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:"PENDING"===e.status?(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:[(0,f.jsx)(p.TCC,{className:"mr-1",size:10}),"Ausstehend"]}):"PROCESSING"===e.status?(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[(0,f.jsx)(p.Bw1,{className:"mr-1 animate-spin",size:10}),"In Bearbeitung"]}):"COMPLETED"===e.status?(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[(0,f.jsx)(p.UgA,{className:"mr-1",size:10}),"Abgeschlossen"]}):(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:[(0,f.jsx)(p.q5L,{className:"mr-1",size:10}),"Fehlgeschlagen"]})}),(0,f.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.recipient_count}),(0,f.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mr-2",children:(0,f.jsx)("div",{className:"h-2.5 rounded-full ".concat("FAILED"===e.status?"bg-red-500":"bg-green-500"),style:{width:"".concat(t,"%")}})}),(0,f.jsxs)("span",{children:[t,"%"]})]}),(0,f.jsxs)("div",{className:"text-xs mt-1",children:["Gesendet: ",e.sent_count," | Fehler: ",e.failed_count]})]})]},e.id)})})]}),O.totalPages>1&&(0,f.jsx)("div",{className:"px-4 py-2 flex justify-center border-t border-gray-200",children:(0,f.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,f.jsxs)("button",{onClick:function(){return er(O.page-1)},disabled:1===O.page,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 ".concat(1===O.page?"opacity-50 cursor-not-allowed":""),children:[(0,f.jsx)("span",{className:"sr-only",children:"Zur\xfcck"}),(0,f.jsx)(p.YFh,{className:"h-5 w-5"})]}),Array.from({length:Math.min(3,O.totalPages)},function(e,t){var s;return s=O.totalPages<=3?t+1:O.page<=2?t+1:O.page>=O.totalPages-1?O.totalPages-2+t:O.page-1+t,(0,f.jsx)("button",{onClick:function(){return er(s)},className:"relative inline-flex items-center px-3 py-2 border text-sm font-medium ".concat(O.page===s?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:s},s)}),(0,f.jsxs)("button",{onClick:function(){return er(O.page+1)},disabled:O.page===O.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 ".concat(O.page===O.totalPages?"opacity-50 cursor-not-allowed":""),children:[(0,f.jsx)("span",{className:"sr-only",children:"Weiter"}),(0,f.jsx)(p.Tfp,{className:"h-5 w-5"})]})]})})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Empf\xe4nger"}),F?(0,f.jsx)("div",{className:"p-6 flex justify-center",children:(0,f.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"})}):0===P.length?(0,f.jsx)("div",{className:"p-4 text-center text-gray-500 border rounded-md",children:"Keine Empf\xe4nger gefunden"}):(0,f.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,f.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,f.jsx)("thead",{className:"bg-gray-50",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-Mail"}),(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,f.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gesendet am"})]})}),(0,f.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 max-h-64 overflow-y-auto",children:P.map(function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.recipient_email}),(0,f.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:"sent"===e.status?(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[(0,f.jsx)(p.UgA,{className:"mr-1",size:10}),"Gesendet"]}):"opened"===e.status?(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[(0,f.jsx)(p.rDJ,{className:"mr-1",size:10}),"Ge\xf6ffnet"]}):"failed"===e.status?(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:[(0,f.jsx)(p.q5L,{className:"mr-1",size:10}),"Fehlgeschlagen"]}):(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:[(0,f.jsx)(p.TCC,{className:"mr-1",size:10}),"Ausstehend"]})}),(0,f.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:en(e.sent_at)})]},e.id)})})]})})]})]})]}):(0,f.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-6 flex flex-col items-center justify-center h-full min-h-[400px]",children:[(0,f.jsx)(p.Imn,{size:48,className:"text-gray-300 mb-4"}),(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-500",children:"W\xe4hlen Sie eine Kampagne aus"}),(0,f.jsx)("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"Klicken Sie auf eine Kampagne in der Liste, um Details anzuzeigen"})]})})]})]})})]}),(0,f.jsx)(x.Z,{})]})}},70181:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/email-builder/history",function(){return s(95991)}])},11163:function(e,t,s){e.exports=s(11171)},13114:function(e,t,s){"use strict";s.d(t,{M:function(){return j}});var a=s(5802),r=s(92401),n=s(25364),i=s(96681),l=s(58868),c=s(240),d=s(93243),o=s(16014);class x extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,d.R)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:t,anchorX:s,root:n}){let i=(0,r.useId)(),l=(0,r.useRef)(null),c=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,r.useContext)(o._);return(0,r.useInsertionEffect)(()=>{let{width:e,height:a,top:r,left:o,right:x}=c.current;if(t||!l.current||!e||!a)return;let m="left"===s?`left: ${o}`:`right: ${x}`;l.current.dataset.motionPopId=i;let h=document.createElement("style");d&&(h.nonce=d);let u=n??document.head;return u.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            ${m}px !important;
            top: ${r}px !important;
          }
        `),()=>{u.contains(h)&&u.removeChild(h)}},[t]),(0,a.jsx)(x,{isPresent:t,childRef:l,sizeRef:c,children:r.cloneElement(e,{ref:l})})}let h=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:l,presenceAffectsLayout:d,mode:o,anchorX:x,root:h})=>{let p=(0,i.h)(u),g=(0,r.useId)(),f=!0,j=(0,r.useMemo)(()=>(f=!1,{id:g,initial:t,isPresent:s,custom:l,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[s,p,n]);return d&&f&&(j={...j}),(0,r.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),r.useEffect(()=>{s||p.size||!n||n()},[s]),"popLayout"===o&&(e=(0,a.jsx)(m,{isPresent:s,anchorX:x,root:h,children:e})),(0,a.jsx)(c.O.Provider,{value:j,children:e})};function u(){return new Map}var p=s(15947);let g=e=>e.key||"";function f(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let j=({children:e,custom:t,initial:s=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:o="sync",propagate:x=!1,anchorX:m="left",root:u})=>{let[j,b]=(0,p.oO)(x),y=(0,r.useMemo)(()=>f(e),[e]),N=x&&!j?[]:y.map(g),v=(0,r.useRef)(!0),w=(0,r.useRef)(y),k=(0,i.h)(()=>new Map),[E,z]=(0,r.useState)(y),[C,P]=(0,r.useState)(y);(0,l.L)(()=>{v.current=!1,w.current=y;for(let e=0;e<C.length;e++){let t=g(C[e]);N.includes(t)?k.delete(t):!0!==k.get(t)&&k.set(t,!1)}},[C,N.length,N.join("-")]);let S=[];if(y!==E){let e=[...y];for(let t=0;t<C.length;t++){let s=C[t],a=g(s);N.includes(a)||(e.splice(t,0,s),S.push(s))}return"wait"===o&&S.length&&(e=S),P(f(e)),z(y),null}let{forceRender:_}=(0,r.useContext)(n.p);return(0,a.jsx)(a.Fragment,{children:C.map(e=>{let r=g(e),n=(!x||!!j)&&(y===C||N.includes(r));return(0,a.jsx)(h,{isPresent:n,initial:(!v.current||!!s)&&void 0,custom:t,presenceAffectsLayout:d,mode:o,root:u,onExitComplete:n?void 0:()=>{if(!k.has(r))return;k.set(r,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(_?.(),P(w.current),x&&b?.(),c&&c())},anchorX:m,children:e},r)})})}}},function(e){e.O(0,[6130,3365,6058,6405,8428,300,2249,3708,2888,9774,179],function(){return e(e.s=70181)}),_N_E=e.O()}]);