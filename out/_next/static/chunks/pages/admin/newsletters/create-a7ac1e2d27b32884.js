(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1120],{98233:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return f},default:function(){return x}});var n=r(50029),s=r(64687),a=r.n(s),l=r(92401),i=r(11163),c=r(63708),o=r(17662),u=r(95443),d=r(88314),h=r(87553),m=r(5802),f=!0;function x(){var e,t=(0,i.useRouter)(),r=(0,h.createClient)(),s=(0,l.useState)(""),f=s[0],x=s[1],b=(0,l.useState)(""),p=b[0],g=b[1],w=(0,l.useState)(!1),N=w[0],j=w[1],v=(e=(0,n.Z)(a().mark(function e(n){var s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f.trim()){e.next=4;break}return alert("Bitte Betreff eingeben."),e.abrupt("return");case 4:if(!(!p||"<p></p>"===p)||confirm("Kein Inhalt vorhanden. Trotzdem als Entwurf speichern?")){e.next=7;break}return e.abrupt("return");case 7:return j(!0),e.prev=8,e.next=11,r.from("newsletters").insert({subject:f,content:p,status:"draft",recipient_count:0,open_count:0,click_count:0}).select("id").single();case 11:if((s=e.sent).data,!(l=s.error)){e.next=16;break}throw l;case 16:t.push("/admin/newsletters"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),console.error("Fehler beim Erstellen des Newsletters:",e.t0),alert("Fehler beim Erstellen des Newsletters");case 23:return e.prev=23,j(!1),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[8,19,23,26]])})),function(t){return e.apply(this,arguments)});return(0,m.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,m.jsx)(c.Z,{}),(0,m.jsxs)("div",{className:"flex flex-1",children:[(0,m.jsx)(u.Z,{activeItem:"newsletters"}),(0,m.jsx)("main",{className:"flex-1 p-6 bg-gray-50",children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Newsletter erstellen"})}),(0,m.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,m.jsx)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Betreff"}),(0,m.jsx)("input",{id:"subject",type:"text",value:f,onChange:function(e){return x(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Willkommen bei Contact Tables",required:!0})]})}),(0,m.jsx)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inhalt"}),(0,m.jsx)(d.Z,{value:p,onChange:g,placeholder:"Schreiben Sie Ihren Newsletter-Inhalt…"})]})}),(0,m.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,m.jsx)("button",{type:"button",onClick:function(){return t.push("/admin/newsletters")},className:"px-4 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 transition-colors",children:"Abbrechen"}),(0,m.jsx)("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors ".concat(N?"opacity-70 cursor-not-allowed":""),children:N?"Speichern…":"Als Entwurf speichern"})]})]})]})})]}),(0,m.jsx)(o.Z,{})]})}},29718:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/newsletters/create",function(){return r(98233)}])}},function(e){e.O(0,[6130,3365,6911,1509,6058,6405,8428,300,1012,3708,2567,2888,9774,179],function(){return e(e.s=29718)}),_N_E=e.O()}]);