(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6449],{14803:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var n=t(17674),s=t(50029),a=t(64687),c=t.n(a),i=t(92401),o=t(83596),u=t(5802);function l(){var e=(0,i.useState)("\xdcberpr\xfcfe Verbindung zu Supabase..."),r=e[0],t=e[1],a=(0,i.useState)(null),l=a[0],d=a[1],p=(0,i.useState)({}),f=p[0],h=p[1],g=(0,i.useState)([]),m=g[0],b=g[1],x=(0,i.useState)(!0),w=x[0],v=x[1];return(0,i.useEffect)(function(){var e;h({url:"https://efmbzrmroyetcqxcwxka.supabase.co",hasKey:!0,nodeEnv:"production"}),(e=(0,s.Z)(c().mark(function e(){var r,n,s,a,i,u,l,p,f,h;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],v(!0),e.prev=2,console.log("Test 1: Pr\xfcfe Basis-Verbindung zu Supabase..."),n=Date.now(),e.next=7,o.supabase.auth.getSession();case 7:a=(s=e.sent).data,i=s.error,u=Date.now(),r.push({name:"Basis-Verbindung (getSession)",success:!i,time:"".concat(u-n,"ms"),error:i?JSON.stringify(i):null,data:a?"Session-Daten vorhanden":"Keine Session-Daten"}),i&&(console.error("Fehler bei Basis-Verbindung:",i),t("Fehler bei der Basis-Verbindung zu Supabase"),d(JSON.stringify(i))),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Unerwarteter Fehler bei Basis-Verbindung:",e.t0),r.push({name:"Basis-Verbindung (getSession)",success:!1,error:e.t0.message||"Unbekannter Fehler",stack:e.t0.stack});case 19:return e.prev=19,console.log("Test 2: Direkte Fetch-Anfrage an Supabase URL..."),l=Date.now(),e.next=24,fetch("".concat("https://efmbzrmroyetcqxcwxka.supabase.co","/auth/v1/token?grant_type=password"),{method:"GET",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbWJ6cm1yb3lldGNxeGN3eGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjkzNDgsImV4cCI6MjA2MzMwNTM0OH0.ohJQapQUce_nuK0Ra30WUQGfchrSG3ZTx43jxV0f0I4"}});case 24:p=e.sent,f=Date.now(),r.push({name:"Direkte Fetch-Anfrage",success:p.ok,status:p.status,statusText:p.statusText,time:"".concat(f-l,"ms")}),e.next=33;break;case 29:e.prev=29,e.t1=e.catch(19),console.error("Fehler bei direkter Fetch-Anfrage:",e.t1),r.push({name:"Direkte Fetch-Anfrage",success:!1,error:e.t1.message||"Unbekannter Fehler"});case 33:try{console.log("Test 3: Netzwerk-Diagnose..."),h={online:navigator.onLine,userAgent:navigator.userAgent,language:navigator.language,cookiesEnabled:navigator.cookieEnabled},r.push({name:"Netzwerk-Diagnose",success:!0,info:h})}catch(e){r.push({name:"Netzwerk-Diagnose",success:!1,error:e.message||"Unbekannter Fehler"})}b(r),v(!1),r.every(function(e){return e.success})?t("Alle Tests erfolgreich!"):t("Einige Tests sind fehlgeschlagen. Siehe Details unten.");case 38:case"end":return e.stop()}},e,null,[[2,15],[19,29]])})),function(){return e.apply(this,arguments)})()},[]),(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-6",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Supabase-Verbindungstest"}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Konfiguration:"}),(0,u.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"URL:"})," ",f.url]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"API-Key:"})," ",f.hasKey?"Gesetzt":"Nicht gesetzt"]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Umgebung:"})," ",f.nodeEnv]})]})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Status:"}),(0,u.jsx)("div",{className:"p-3 rounded ".concat(r.includes("erfolgreich")?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:w?"Tests werden ausgef\xfchrt...":r})]}),l&&(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Fehler:"}),(0,u.jsx)("div",{className:"bg-red-100 text-red-800 p-3 rounded overflow-auto max-h-40",children:(0,u.jsx)("pre",{className:"whitespace-pre-wrap",children:l})})]}),m.length>0&&(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Testergebnisse:"}),m.map(function(e,r){return(0,u.jsxs)("div",{className:"mb-3 border rounded overflow-hidden",children:[(0,u.jsxs)("div",{className:"p-2 ".concat(e.success?"bg-green-100":"bg-red-100"," flex justify-between items-center"),children:[(0,u.jsx)("span",{className:"font-medium",children:e.name}),(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.success?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.success?"Erfolg":"Fehler"})]}),(0,u.jsxs)("div",{className:"p-3 bg-white",children:[e.time&&(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Zeit:"})," ",e.time]}),e.status&&(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Status:"})," ",e.status," ",e.statusText]}),e.data&&(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Daten:"})," ",e.data]}),e.error&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsx)("p",{children:(0,u.jsx)("strong",{children:"Fehler:"})}),(0,u.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto max-h-32",children:e.error})]}),e.info&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsx)("p",{children:(0,u.jsx)("strong",{children:"Netzwerk-Info:"})}),(0,u.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs",children:Object.entries(e.info).map(function(e){var r=(0,n.Z)(e,2),t=r[0],s=r[1];return(0,u.jsxs)("div",{children:[t,": ",String(s)]},t)})})]})]})]},r)})]}),(0,u.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,u.jsx)("a",{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Zur\xfcck zur Startseite"}),(0,u.jsx)("button",{onClick:function(){return window.location.reload()},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Tests erneut ausf\xfchren"})]})]})})}},83596:function(e,r,t){"use strict";t.r(r),t.d(r,{admin:function(){return Z},auth:function(){return I},profiles:function(){return S},restaurants:function(){return O},supabase:function(){return k}});var n,s,a,c,i,o,u,l,d,p,f,h,g=t(59499),m=t(50029),b=t(64687),x=t.n(b),w=t(86405);function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){(0,g.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var j="https://efmbzrmroyetcqxcwxka.supabase.co",N="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbWJ6cm1yb3lldGNxeGN3eGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjkzNDgsImV4cCI6MjA2MzMwNTM0OH0.ohJQapQUce_nuK0Ra30WUQGfchrSG3ZTx43jxV0f0I4";j&&N||console.error("Kritischer Fehler: Supabase URL oder Anon Key fehlen in der Client-Konfiguration.");var k=(0,w.createBrowserClient)(j,N,{auth:{storageKey:"contact-tables-auth",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),I={signUp:(n=(0,m.Z)(x().mark(function e(r,t){var n,s,a,c,i=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,k.auth.signUp({email:r,password:t,options:{data:y(y({},n),{},{role:n.role||"CUSTOMER"})}});case 3:return a=(s=e.sent).data,c=s.error,e.abrupt("return",{data:a,error:c});case 7:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)}),signIn:(s=(0,m.Z)(x().mark(function e(r,t){var n,s,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signInWithPassword({email:r,password:t});case 2:return s=(n=e.sent).data,a=n.error,e.abrupt("return",{data:s,error:a});case 6:case"end":return e.stop()}},e)})),function(e,r){return s.apply(this,arguments)}),signInWithGoogle:(a=(0,m.Z)(x().mark(function e(r){var t,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signInWithOAuth({provider:"google",options:{redirectTo:(null==r?void 0:r.redirectTo)||"".concat(window.location.origin,"/auth/callback")}});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),signOut:(c=(0,m.Z)(x().mark(function e(){var r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signOut();case 2:return r=e.sent.error,e.abrupt("return",{error:r});case 5:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)}),getUser:(i=(0,m.Z)(x().mark(function e(){var r,t,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.getUser();case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)}),getSession:(o=(0,m.Z)(x().mark(function e(){var r,t,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.getSession();case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),resetPassword:(u=(0,m.Z)(x().mark(function e(r){var t,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.resetPasswordForEmail(r,{redirectTo:"https://contact-tables.org/auth/reset-password"});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),updatePassword:(l=(0,m.Z)(x().mark(function e(r){var t,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.updateUser({password:r});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})},S={getProfile:(d=(0,m.Z)(x().mark(function e(r){var t,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").select("*").eq("id",r).single();case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)}),updateProfile:(p=(0,m.Z)(x().mark(function e(r,t){var n,s,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").update(t).eq("id",r);case 2:return s=(n=e.sent).data,a=n.error,e.abrupt("return",{data:s,error:a});case 6:case"end":return e.stop()}},e)})),function(e,r){return p.apply(this,arguments)})},O={getRestaurantProfile:(f=(0,m.Z)(x().mark(function e(r){var t,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("restaurants").select("*").eq("user_id",r).single();case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return f.apply(this,arguments)})},Z={getAllUsers:(h=(0,m.Z)(x().mark(function e(){var r,t,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").select("*");case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return h.apply(this,arguments)})}},64111:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/supabase-test",function(){return t(14803)}])},52587:function(e,r,t){"use strict";function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}t.d(r,{Z:function(){return n}})},14666:function(e,r,t){"use strict";function n(e){if(Array.isArray(e))return e}t.d(r,{Z:function(){return n}})},50029:function(e,r,t){"use strict";function n(e,r,t,n,s,a,c){try{var i=e[a](c),o=i.value}catch(e){t(e);return}i.done?r(o):Promise.resolve(o).then(n,s)}function s(e){return function(){var r=this,t=arguments;return new Promise(function(s,a){var c=e.apply(r,t);function i(e){n(c,s,a,i,o,"next",e)}function o(e){n(c,s,a,i,o,"throw",e)}i(void 0)})}}t.d(r,{Z:function(){return s}})},14882:function(e,r,t){"use strict";function n(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.d(r,{Z:function(){return n}})},17674:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(14666),s=t(2937),a=t(14882);function c(e,r){return(0,n.Z)(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,s,a,c,i=[],o=!0,u=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;o=!1}else for(;!(o=(n=a.call(t)).done)&&(i.push(n.value),i.length!==r);o=!0);}catch(e){u=!0,s=e}finally{try{if(!o&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(u)throw s}}return i}}(e,r)||(0,s.Z)(e,r)||(0,a.Z)()}},2937:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(52587);function s(e,r){if(e){if("string"==typeof e)return(0,n.Z)(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return(0,n.Z)(e,r)}}}},function(e){e.O(0,[6405,2888,9774,179],function(){return e(e.s=64111)}),_N_E=e.O()}]);