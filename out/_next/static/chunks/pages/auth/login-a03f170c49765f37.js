(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{17662:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(41664),s=t.n(n),a=t(25675),o=t.n(a),i=t(91472),l=t(41338),c=t(5802);function u(){return(0,c.jsx)("footer",{className:"bg-gradient-to-br from-neutral-900 to-neutral-800 text-neutral-300",children:(0,c.jsxs)("div",{className:"container mx-auto py-16 px-4",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)(s(),{href:"/",className:"inline-block",children:(0,c.jsx)("div",{className:"flex items-center space-x-3 group",children:(0,c.jsx)("div",{className:"h-12 bg-white p-2 rounded-lg overflow-hidden relative",children:(0,c.jsx)(o(),{src:"/images/logo-fixed/Logo CT quer 4c.webp",alt:"Contact Tables Logo",width:120,height:40,className:"transition-all group-hover:scale-105",priority:!0,style:{objectFit:"contain",width:"auto",height:"100%"},quality:100})})})}),(0,c.jsx)("p",{className:"text-neutral-400 leading-relaxed",children:"Wir verbinden Menschen am Restauranttisch â€“ f\xfcr echte Begegnungen und inspirierende Gespr\xe4che."})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Entdecken"}),(0,c.jsxs)("ul",{className:"space-y-4",children:[(0,c.jsx)("li",{children:(0,c.jsxs)(s(),{href:"/restaurants",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,c.jsx)(i.i63,{className:"group-hover:translate-x-1 transition-transform"}),(0,c.jsx)("span",{children:"Restaurants finden"})]})}),(0,c.jsx)("li",{children:(0,c.jsxs)(s(),{href:"/about",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,c.jsx)(i.WY8,{className:"group-hover:translate-x-1 transition-transform"}),(0,c.jsx)("span",{children:"\xdcber uns"})]})}),(0,c.jsx)("li",{children:(0,c.jsxs)(s(),{href:"/restaurant/register",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,c.jsx)(i.i63,{className:"group-hover:translate-x-1 transition-transform"}),(0,c.jsx)("span",{children:"Restaurant anmelden"})]})}),(0,c.jsx)("li",{children:(0,c.jsxs)(s(),{href:"/events",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,c.jsx)(i.TCC,{className:"group-hover:translate-x-1 transition-transform"}),(0,c.jsx)("span",{children:"Events & Aktionen"})]})})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Rechtliches"}),(0,c.jsxs)("ul",{className:"space-y-4",children:[(0,c.jsx)("li",{children:(0,c.jsx)(s(),{href:"/datenschutz",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Datenschutzerkl\xe4rung"})}),(0,c.jsx)("li",{children:(0,c.jsx)(s(),{href:"/faq",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"FAQ"})}),(0,c.jsx)("li",{children:(0,c.jsx)(s(),{href:"/impressum",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Impressum"})}),(0,c.jsx)("li",{children:(0,c.jsx)(s(),{href:"/barrierefreiheit",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Barrierefreiheit"})})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Kontakt"}),(0,c.jsxs)("ul",{className:"space-y-4",children:[(0,c.jsx)("li",{className:"group",children:(0,c.jsxs)("a",{href:"tel:+4915679640069",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,c.jsx)(i.tUt,{size:16})}),(0,c.jsx)("span",{children:"+49 15679 640069"})]})}),(0,c.jsx)("li",{className:"group",children:(0,c.jsxs)(s(),{href:"/contact",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,c.jsx)(i.Imn,{size:16})}),(0,c.jsx)("span",{children:"Nachricht absenden"})]})}),(0,c.jsx)("li",{className:"group",children:(0,c.jsxs)("a",{href:"https://www.facebook.com/contacttables/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,c.jsx)(l.tBk,{size:16})}),(0,c.jsx)("span",{children:"Facebook"})]})}),(0,c.jsx)("li",{className:"group",children:(0,c.jsxs)("a",{href:"https://www.instagram.com/contacttables/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,c.jsx)(l.Zf_,{size:16})}),(0,c.jsx)("span",{children:"Instagram"})]})})]})]})]}),(0,c.jsx)("div",{className:"border-t border-neutral-800 mt-16 pt-8 text-center",children:(0,c.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,c.jsxs)("p",{className:"text-neutral-500",children:["\xa9 ",new Date().getFullYear()," contact-tables. Alle Rechte vorbehalten."]}),(0,c.jsxs)("p",{className:"flex items-center text-neutral-500",children:[(0,c.jsx)("span",{children:"Made with"})," ",(0,c.jsx)(i.$aX,{className:"mx-2 text-primary-500"})," ",(0,c.jsx)("span",{children:"in Germany"})]})]})})]})})}},70063:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(92401),s=t(91472),a=t(5802);function o(e){var r=e.id,t=e.name,o=e.placeholder,i=e.value,l=e.onChange,c=e.required,u=e.className,d=e.autoComplete,p=e.disabled,h=e.minLength,f=(0,n.useState)(!1),m=f[0],x=f[1],g=(0,n.useState)(!1),b=g[0],v=g[1],y=(0,n.useRef)(null);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{ref:y,type:m?"text":"password",id:r,name:t,placeholder:void 0===o?"Passwort eingeben":o,value:i,onChange:l,onFocus:function(){v(!0)},onBlur:function(){v(!1)},required:void 0!==c&&c,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(void 0===u?"":u),autoComplete:void 0===d?"current-password":d,disabled:void 0!==p&&p,minLength:h}),(0,a.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),x(!m),y.current&&y.current.focus()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none ".concat(b?"z-10":""),"aria-label":m?"Passwort verbergen":"Passwort anzeigen",tabIndex:-1,children:m?(0,a.jsx)(s.rzC,{size:20}):(0,a.jsx)(s.rDJ,{size:20})})]})}},44612:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(50029),s=t(64687),a=t.n(s),o=t(92401),i=t(11163),l=t(41664),c=t.n(l),u=t(63708),d=t(17662),p=t(91472),h=t(83596),f=t(70063),m=t(5802),x=function(e){return"string"==typeof e&&e.startsWith("/")};function g(){console.log("[Login Page - Render] window.location.href:",window.location.href),console.log("[Login Page - Render] window.location.search includes cb=test:",window.location.search.includes("cb=test"));var e,r=(0,o.useState)(""),t=r[0],s=r[1],l=(0,o.useState)(""),g=l[0],b=l[1],v=(0,o.useState)(null),y=v[0],w=v[1],j=(0,o.useState)(!1),N=j[0],k=j[1],P=(0,i.useRouter)(),R=P.query,S=R.callbackUrl,A=R.message,U=R.error,E=(0,o.useState)("CUSTOMER"),L=E[0],T=E[1],C=(0,o.useState)(null),O=(C[0],C[1]),I=(0,o.useState)(null),z=(I[0],I[1]),M=(0,o.useState)(!0),Z=(M[0],M[1]);(0,o.useEffect)(function(){U&&w("Fehler: ".concat(U)),A&&console.log("Message from query params:",A)},[U,A]),(0,o.useEffect)(function(){if(!P.isReady){console.log("[Login Page] Router not ready, waiting...");return}console.log("[Login Page] Router is ready."),console.log("[Login Page] window.location.href:",window.location.href),console.log("[Login Page] router.asPath:",P.asPath),console.log("[Login Page] Current router.query:",P.query),console.log("[Login Page] router.query.cb:",P.query.cb),console.log("[Login Page] router.asPath includes cb=test:",P.asPath.includes("cb=test"));var e,r=P.query.cb;console.log("[Login Page] diagnosticCbValue from router.query.cb:",r),"test"===r?console.log("[Login Page] Diagnostic parameter cb=test FOUND!"):console.log("[Login Page] Diagnostic parameter cb=test NOT found or incorrect.");var t=sessionStorage.getItem("redirectAttempt"),s=sessionStorage.getItem("preferredUserType");s&&(T(s),sessionStorage.removeItem("preferredUserType")),(e=(0,n.Z)(a().mark(function e(){var r,n,s,o,i,l,c,u,d,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,h.supabase.auth.getSession();case 4:if(n=(r=e.sent).data,!(s=r.error)){e.next=11;break}return console.error("Fehler beim Abrufen der Sitzung:",s),Z(!1),e.abrupt("return");case 11:if(!(null!=n&&n.session)){e.next=50;break}if(O(n.session),z(n.session.user),l=((null===(o=n.session.user.user_metadata)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.role)||(null===(i=n.session.user.user_metadata)||void 0===i?void 0:i.role)||"CUSTOMER").toUpperCase(),!t){e.next=21;break}return console.log("Weiterleitungsschleife erkannt, bleibe auf der Login-Seite"),sessionStorage.removeItem("redirectAttempt"),Z(!1),e.abrupt("return");case 21:if(!("RESTAURANT"===L&&"RESTAURANT"!==l)){e.next=25;break}return w("Dieses Konto ist kein Restaurant-Konto. Bitte w\xe4hlen Sie den korrekten Anmeldetyp oder loggen Sie sich als Kunde ein."),Z(!1),e.abrupt("return");case 25:if(!("CUSTOMER"===L&&"RESTAURANT"===l)){e.next=29;break}return w("Dieses Konto ist ein Restaurant-Konto. Bitte w\xe4hlen Sie den korrekten Anmeldetyp oder loggen Sie sich als Restaurant ein."),Z(!1),e.abrupt("return");case 29:if(Array.isArray(c=P.query.callbackUrl)?u=c[0]:"string"==typeof c&&(u=c),!u&&P.asPath.includes("?")&&(d=P.asPath.split("?")).length>1&&(p=new URLSearchParams(d[1]).get("callbackUrl"))&&(u=p),!(u&&x(u))){e.next=38;break}return console.log("[Login Page] Original Valid callbackUrl '".concat(u,"' found, redirecting.")),P.push(u).catch(function(e){console.error("[Login Page] Failed to redirect to callbackUrl:",e),P.push("/").catch(function(e){return console.error("[Login Page] Failed to redirect to / on error:",e)})}),e.abrupt("return");case 38:u?console.warn("[Login Page] Original Invalid callbackUrl found: '".concat(u,"'. Not redirecting.")):console.log("[Login Page] Original No callbackUrl found or it is invalid. Attempting role-based redirect.");case 39:e.t0=l,e.next="ADMIN"===e.t0?42:"RESTAURANT"===e.t0?44:46;break;case 42:return P.push("/admin/dashboard"),e.abrupt("break",47);case 44:return P.push("/restaurant/dashboard"),e.abrupt("break",47);case 46:P.push("/customer/dashboard");case 47:Z(!1),e.next=52;break;case 50:Z(!1),sessionStorage.removeItem("redirectAttempt");case 52:e.next=58;break;case 54:e.prev=54,e.t1=e.catch(1),console.error("Unerwarteter Fehler in checkSession:",e.t1),Z(!1);case 58:case"end":return e.stop()}},e,null,[[1,54]])})),function(){return e.apply(this,arguments)})()},[P.isReady,P.query,P.asPath,L]);var D=(e=(0,n.Z)(a().mark(function e(r){var n,s,o,i,l,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),w(null),k(!0),e.prev=3,console.log("[Login Page] Anmeldung wird versucht f\xfcr:",t),e.next=7,h.auth.signIn(t,g);case 7:if(s=(n=e.sent).data,!(o=n.error)){e.next=14;break}return console.error("[Login Page] Login error:",o),w("Ung\xfcltige E-Mail oder Passwort."),e.abrupt("return");case 14:if(console.log("[Login Page] Anmeldung erfolgreich, Benutzerdaten:",null!=s&&s.user?"Benutzer vorhanden":"Kein Benutzer"),!(null!=s&&s.user)){e.next=52;break}if(c=((null===(i=s.user.user_metadata)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.role)||(null===(l=s.user.user_metadata)||void 0===l?void 0:l.role)||"CUSTOMER").toUpperCase(),!("RESTAURANT"===L&&"RESTAURANT"!==c)){e.next=21;break}return w("Dieses Konto ist kein Restaurant-Konto. Bitte w\xe4hlen Sie den korrekten Anmeldetyp."),e.abrupt("return");case 21:if(!("CUSTOMER"===L&&"RESTAURANT"===c)){e.next=24;break}return w("Dieses Konto ist ein Restaurant-Konto. Bitte w\xe4hlen Sie den korrekten Anmeldetyp."),e.abrupt("return");case 24:return console.log("[Login Page] Login erfolgreich als ".concat(c,", Weiterleitung...")),console.log("[Login Page] Aktualisiere Server-Zustand vor der Weiterleitung"),e.next=28,P.replace(P.asPath);case 28:return e.next=30,new Promise(function(e){return setTimeout(e,500)});case 30:return e.next=32,h.supabase.auth.getSession();case 32:if(console.log("[Login Page] Session nach Login:",null!=(u=e.sent.data)&&u.session?"Session vorhanden":"Keine Session"),!x(S)){e.next=40;break}console.log("[Login Page] G\xfcltige callbackUrl gefunden: ".concat(S,", Weiterleitung dorthin...")),P.push(S),e.next=52;break;case 40:console.log("[Login Page] Keine g\xfcltige callbackUrl, Fallback-Weiterleitung basierend auf Rolle ".concat(c)),e.t0=c,e.next="ADMIN"===e.t0?44:"RESTAURANT"===e.t0?47:50;break;case 44:return console.log("[Login Page] Weiterleitung zum Admin-Dashboard"),P.push("/admin/dashboard"),e.abrupt("break",52);case 47:return console.log("[Login Page] Weiterleitung zum Restaurant-Dashboard"),P.push("/restaurant/dashboard"),e.abrupt("break",52);case 50:console.log("[Login Page] Weiterleitung zum Kunden-Dashboard"),P.push("/customer/dashboard");case 52:e.next=58;break;case 54:e.prev=54,e.t1=e.catch(3),console.error("Login error:",e.t1),w("Ein Fehler ist aufgetreten: ".concat(e.t1.message||"Unbekannter Fehler"));case 58:return e.prev=58,k(!1),e.finish(58);case 61:case"end":return e.stop()}},e,null,[[3,54,58,61]])})),function(r){return e.apply(this,arguments)});return(0,m.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,m.jsx)(u.Z,{}),(0,m.jsx)("main",{className:"flex-grow flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,m.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Anmelden"}),(0,m.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Oder"," ",(0,m.jsx)(c(),{href:"/auth/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"erstelle ein neues Konto"})]}),(0,m.jsxs)("div",{className:"mt-6 flex rounded-md shadow-sm",children:[(0,m.jsx)("button",{type:"button",className:"relative inline-flex items-center w-1/2 px-4 py-2 rounded-l-md border ".concat("CUSTOMER"===L?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300"," text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"),onClick:function(){return T("CUSTOMER")},children:"Als Gast anmelden"}),(0,m.jsx)("button",{type:"button",className:"relative inline-flex items-center w-1/2 px-4 py-2 rounded-r-md border ".concat("RESTAURANT"===L?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300"," text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"),onClick:function(){return T("RESTAURANT")},children:"Als Restaurant anmelden"})]})]}),y&&(0,m.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,m.jsx)("strong",{className:"font-bold",children:"Fehler: "}),(0,m.jsx)("span",{className:"block sm:inline",children:y})]}),(0,m.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,m.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"email",className:"sr-only",children:"E-Mail-Adresse"}),(0,m.jsx)("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"E-Mail-Adresse",value:t,onChange:function(e){return s(e.target.value)}})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Passwort"}),(0,m.jsx)(f.Z,{id:"password",name:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Passwort",value:g,onChange:function(e){return b(e.target.value)}})]})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,m.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Angemeldet bleiben"})]}),(0,m.jsx)("div",{className:"text-sm",children:(0,m.jsx)(c(),{href:"/auth/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Passwort vergessen?"})})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("button",{type:"submit",disabled:N,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,m.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,m.jsx)(p.Imn,{className:"h-5 w-5 text-blue-500 group-hover:text-blue-400"})}),N?"Anmeldung l\xe4uft...":"Anmelden"]})})]})]})}),(0,m.jsx)(d.Z,{})]})}},83596:function(e,r,t){"use strict";t.r(r),t.d(r,{admin:function(){return A},auth:function(){return P},profiles:function(){return R},restaurants:function(){return S},supabase:function(){return k}});var n,s,a,o,i,l,c,u,d,p,h,f,m=t(59499),x=t(50029),g=t(64687),b=t.n(g),v=t(86405);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(r){(0,m.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var j="https://efmbzrmroyetcqxcwxka.supabase.co",N="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbWJ6cm1yb3lldGNxeGN3eGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjkzNDgsImV4cCI6MjA2MzMwNTM0OH0.ohJQapQUce_nuK0Ra30WUQGfchrSG3ZTx43jxV0f0I4";j&&N||console.error("Kritischer Fehler: Supabase URL oder Anon Key fehlen in der Client-Konfiguration.");var k=(0,v.createBrowserClient)(j,N,{auth:{storageKey:"contact-tables-auth",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),P={signUp:(n=(0,x.Z)(b().mark(function e(r,t){var n,s,a,o,i=arguments;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,k.auth.signUp({email:r,password:t,options:{data:w(w({},n),{},{role:n.role||"CUSTOMER"})}});case 3:return a=(s=e.sent).data,o=s.error,e.abrupt("return",{data:a,error:o});case 7:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)}),signIn:(s=(0,x.Z)(b().mark(function e(r,t){var n,s,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signInWithPassword({email:r,password:t});case 2:return s=(n=e.sent).data,a=n.error,e.abrupt("return",{data:s,error:a});case 6:case"end":return e.stop()}},e)})),function(e,r){return s.apply(this,arguments)}),signInWithGoogle:(a=(0,x.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signInWithOAuth({provider:"google",options:{redirectTo:(null==r?void 0:r.redirectTo)||"".concat(window.location.origin,"/auth/callback")}});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),signOut:(o=(0,x.Z)(b().mark(function e(){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signOut();case 2:return r=e.sent.error,e.abrupt("return",{error:r});case 5:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),getUser:(i=(0,x.Z)(b().mark(function e(){var r,t,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.getUser();case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)}),getSession:(l=(0,x.Z)(b().mark(function e(){var r,t,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.getSession();case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)}),resetPassword:(c=(0,x.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.resetPasswordForEmail(r,{redirectTo:"https://contact-tables.org/auth/reset-password"});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)}),updatePassword:(u=(0,x.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.updateUser({password:r});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)})},R={getProfile:(d=(0,x.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").select("*").eq("id",r).single();case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)}),updateProfile:(p=(0,x.Z)(b().mark(function e(r,t){var n,s,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").update(t).eq("id",r);case 2:return s=(n=e.sent).data,a=n.error,e.abrupt("return",{data:s,error:a});case 6:case"end":return e.stop()}},e)})),function(e,r){return p.apply(this,arguments)})},S={getRestaurantProfile:(h=(0,x.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("restaurants").select("*").eq("user_id",r).single();case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})},A={getAllUsers:(f=(0,x.Z)(b().mark(function e(){var r,t,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").select("*");case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return f.apply(this,arguments)})}},40163:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(44612)}])},11163:function(e,r,t){e.exports=t(11171)},13114:function(e,r,t){"use strict";t.d(r,{M:function(){return b}});var n=t(5802),s=t(92401),a=t(25364),o=t(96681),i=t(58868),l=t(240),c=t(93243),u=t(16014);class d extends s.Component{getSnapshotBeforeUpdate(e){let r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){let e=r.offsetParent,t=(0,c.R)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft,n.right=t-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:r,anchorX:t,root:a}){let o=(0,s.useId)(),i=(0,s.useRef)(null),l=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,s.useContext)(u._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:n,top:s,left:u,right:d}=l.current;if(r||!i.current||!e||!n)return;let p="left"===t?`left: ${u}`:`right: ${d}`;i.current.dataset.motionPopId=o;let h=document.createElement("style");c&&(h.nonce=c);let f=a??document.head;return f.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            ${p}px !important;
            top: ${s}px !important;
          }
        `),()=>{f.contains(h)&&f.removeChild(h)}},[r]),(0,n.jsx)(d,{isPresent:r,childRef:i,sizeRef:l,children:s.cloneElement(e,{ref:i})})}let h=({children:e,initial:r,isPresent:t,onExitComplete:a,custom:i,presenceAffectsLayout:c,mode:u,anchorX:d,root:h})=>{let m=(0,o.h)(f),x=(0,s.useId)(),g=!0,b=(0,s.useMemo)(()=>(g=!1,{id:x,initial:r,isPresent:t,custom:i,onExitComplete:e=>{for(let r of(m.set(e,!0),m.values()))if(!r)return;a&&a()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[t,m,a]);return c&&g&&(b={...b}),(0,s.useMemo)(()=>{m.forEach((e,r)=>m.set(r,!1))},[t]),s.useEffect(()=>{t||m.size||!a||a()},[t]),"popLayout"===u&&(e=(0,n.jsx)(p,{isPresent:t,anchorX:d,root:h,children:e})),(0,n.jsx)(l.O.Provider,{value:b,children:e})};function f(){return new Map}var m=t(15947);let x=e=>e.key||"";function g(e){let r=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&r.push(e)}),r}let b=({children:e,custom:r,initial:t=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:u="sync",propagate:d=!1,anchorX:p="left",root:f})=>{let[b,v]=(0,m.oO)(d),y=(0,s.useMemo)(()=>g(e),[e]),w=d&&!b?[]:y.map(x),j=(0,s.useRef)(!0),N=(0,s.useRef)(y),k=(0,o.h)(()=>new Map),[P,R]=(0,s.useState)(y),[S,A]=(0,s.useState)(y);(0,i.L)(()=>{j.current=!1,N.current=y;for(let e=0;e<S.length;e++){let r=x(S[e]);w.includes(r)?k.delete(r):!0!==k.get(r)&&k.set(r,!1)}},[S,w.length,w.join("-")]);let U=[];if(y!==P){let e=[...y];for(let r=0;r<S.length;r++){let t=S[r],n=x(t);w.includes(n)||(e.splice(r,0,t),U.push(t))}return"wait"===u&&U.length&&(e=U),A(g(e)),R(y),null}let{forceRender:E}=(0,s.useContext)(a.p);return(0,n.jsx)(n.Fragment,{children:S.map(e=>{let s=x(e),a=(!d||!!b)&&(y===S||w.includes(s));return(0,n.jsx)(h,{isPresent:a,initial:(!j.current||!!t)&&void 0,custom:r,presenceAffectsLayout:c,mode:u,root:f,onExitComplete:a?void 0:()=>{if(!k.has(s))return;k.set(s,!0);let e=!0;k.forEach(r=>{r||(e=!1)}),e&&(E?.(),A(N.current),d&&v?.(),l&&l())},anchorX:p,children:e},s)})})}}},function(e){e.O(0,[6130,3365,6058,6405,8428,300,3708,2888,9774,179],function(){return e(e.s=40163)}),_N_E=e.O()}]);