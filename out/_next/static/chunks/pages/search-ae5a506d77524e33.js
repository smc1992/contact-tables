(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{49581:function(e,t,r){"use strict";var s=r(50029),a=r(17674),n=r(64687),l=r.n(n),i=r(92401),c=r(41664),o=r.n(c),d=r(25675),u=r.n(d),m=r(89681),x=r(91472),p=r(39920),h=r(5802);t.Z=function(e){var t,r=e.restaurant,n=e.isFavorite,c=e.onFavoriteToggle,d=e.showDistance,f=void 0!==d&&d,b=i.useState(void 0!==n&&n),y=(0,a.Z)(b,2),g=y[0],j=y[1],v=i.useState(!1),N=(0,a.Z)(v,2),w=N[0],k=N[1],S=(t=(0,s.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),!w){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,k(!0),!g){e.next=11;break}return e.next=9,p.BG.removeFavorite(r.id);case 9:e.next=13;break;case 11:return e.next=13,p.BG.addFavorite(r.id);case 13:j(!g),c&&c(r.id,!g),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.error("Fehler beim \xc4ndern des Favoritenstatus:",e.t0);case 20:return e.prev=20,k(!1),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[4,17,20,23]])})),function(e){return t.apply(this,arguments)}),F=function(e){return e?e<1?"".concat(Math.round(1e3*e)," m"):"".concat(e.toFixed(1).replace(".",",")," km"):null};r.id;var C=r.slug,T=r.name,z=r.cuisine,E=r.city,O=r.avg_rating,_=r.total_ratings,Z=r.image_url,D=r.distance_in_meters;return(0,h.jsx)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-neutral-200 h-full flex flex-col",children:C?(0,h.jsx)(o(),{href:"/restaurants/".concat(C),className:"block h-full",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"h-48 w-full relative",children:(0,h.jsx)(u(),{src:Z||"/images/logo.svg",alt:T||"Restaurant",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"})}),(0,h.jsx)(m.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:S,className:"absolute top-3 right-3 p-2 rounded-full ".concat(g?"bg-primary-500 text-white":"bg-white text-secondary-800"," shadow-md z-10"),disabled:w,children:(0,h.jsx)(x.$aX,{size:20,className:g?"fill-white":""})}),r.offer_table_today&&(0,h.jsx)("div",{className:"absolute top-3 left-3 bg-primary-500 text-secondary-900 px-3 py-1 rounded-full text-sm font-bold shadow-md",children:"Heute verf\xfcgbar"}),(0,h.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsxs)("div",{className:"bg-white text-secondary-900 rounded-lg px-2 py-1 flex items-center shadow-md",children:[(0,h.jsx)(x.nae,{className:"text-yellow-500 mr-1",size:16}),O&&O>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"font-bold",children:O.toFixed(1).replace(".",",")}),(0,h.jsxs)("span",{className:"text-xs text-secondary-600 ml-1",children:["(",_,")"]})]}):(0,h.jsx)("span",{className:"text-sm text-secondary-600",children:"Neu"})]}),f&&null!=D&&(0,h.jsxs)("div",{className:"bg-white text-secondary-900 rounded-lg px-2 py-1 flex items-center shadow-md ml-2",children:[(0,h.jsx)(x.i63,{className:"text-primary-500 mr-1",size:16}),(0,h.jsx)("span",{className:"font-bold text-sm",children:F(D/1e3)})]})]})})]}),(0,h.jsxs)("div",{className:"p-4 flex-grow",children:[(0,h.jsx)("div",{className:"flex items-start justify-between",children:(0,h.jsx)("h3",{className:"text-lg font-bold text-gray-800 truncate",children:T})}),(0,h.jsxs)("div",{className:"flex items-center text-secondary-600 mb-2",children:[(0,h.jsx)(x.i63,{size:16,className:"mr-1 flex-shrink-0"}),(0,h.jsxs)("p",{className:"text-sm text-gray-500",children:[z," • ",E]})]}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,h.jsx)("span",{className:"bg-neutral-100 text-secondary-700 px-2 py-1 rounded-md text-xs font-medium",children:z}),(0,h.jsxs)("span",{className:"bg-neutral-100 text-secondary-700 px-2 py-1 rounded-md text-xs font-medium flex items-center",children:[(0,h.jsx)(x.WY8,{size:14,className:"mr-1"}),"bis ",r.capacity," Personen"]})]}),(0,h.jsx)("p",{className:"text-secondary-600 text-sm line-clamp-2 mb-3",children:r.description})]}),(0,h.jsx)("div",{className:"p-4 pt-0 mt-auto",children:(0,h.jsxs)(m.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-primary-50 hover:bg-primary-100 border-2 border-primary-500 text-primary-700 font-bold py-2 px-4 rounded-lg flex items-center justify-center transition-all",children:[(0,h.jsx)(x.TCC,{className:"mr-2",size:18}),"Tisch anfragen"]})})]})}):(0,h.jsxs)("div",{className:"block h-full",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"h-48 w-full relative",children:(0,h.jsx)(u(),{src:Z||"/images/logo.svg",alt:T||"Restaurant",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"})}),r.offer_table_today&&(0,h.jsx)("div",{className:"absolute top-3 left-3 bg-primary-500 text-secondary-900 px-3 py-1 rounded-full text-sm font-bold shadow-md",children:"Heute verf\xfcgbar"}),(0,h.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsxs)("div",{className:"bg-white text-secondary-900 rounded-lg px-2 py-1 flex items-center shadow-md",children:[(0,h.jsx)(x.nae,{className:"text-yellow-500 mr-1",size:16}),O&&O>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"font-bold",children:O.toFixed(1).replace(".",",")}),(0,h.jsxs)("span",{className:"text-xs text-secondary-600 ml-1",children:["(",_,")"]})]}):(0,h.jsx)("span",{className:"text-sm text-secondary-600",children:"Neu"})]}),f&&null!=D&&(0,h.jsxs)("div",{className:"bg-white text-secondary-900 rounded-lg px-2 py-1 flex items-center shadow-md ml-2",children:[(0,h.jsx)(x.i63,{className:"text-primary-500 mr-1",size:16}),(0,h.jsx)("span",{className:"font-bold text-sm",children:F(D/1e3)})]})]})})]}),(0,h.jsxs)("div",{className:"p-4 flex-grow",children:[(0,h.jsx)("h3",{className:"text-lg font-bold text-gray-800 truncate",children:T}),(0,h.jsxs)("div",{className:"flex items-center text-secondary-600 mb-2",children:[(0,h.jsx)(x.i63,{size:16,className:"mr-1 flex-shrink-0"}),(0,h.jsxs)("p",{className:"text-sm text-gray-500",children:[z," • ",E]})]}),(0,h.jsx)("p",{className:"text-secondary-600 text-sm line-clamp-2 mb-3",children:r.description})]}),(0,h.jsx)("div",{className:"p-4 pt-0 mt-auto",children:(0,h.jsxs)("div",{className:"bg-gray-200 text-gray-500 font-bold py-2 px-4 rounded-lg flex items-center justify-center",children:[(0,h.jsx)(x.TCC,{className:"mr-2",size:18}),"Details nicht verf\xfcgbar"]})})]})})}},50944:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return v},default:function(){return N}});var s=r(90116),a=r(50029),n=r(64687),l=r.n(n),i=r(92401),c=r(11163),o=r(91472),d=r(89681),u=r(13114),m=r(63708),x=r(17662),p=r(59499),h=r(39920),f=r(5802);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}var y=function(e){var t=e.className,r=e.initialValues,s=void 0===r?{}:r,n=e.onSearch,u=(0,c.useRouter)(),m=(0,i.useState)(s.searchTerm||""),x=m[0],y=m[1],g=(0,i.useState)(s.date||new Date().toISOString().split("T")[0]),j=g[0],v=g[1],N=(0,i.useState)(s.time||"19:00"),w=N[0],k=N[1],S=(0,i.useState)(s.guests||"2"),F=S[0],C=S[1],T=(0,i.useState)(null),z=T[0],E=T[1],O=(0,i.useState)(!1),_=O[0],Z=O[1],D=(0,i.useState)(null),P=D[0],R=D[1],I=(0,i.useState)(["Berlin","M\xfcnchen","Hamburg","K\xf6ln","Frankfurt"])[0];return(0,i.useEffect)(function(){var e;(e=(0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0),R(null),e.next=5,h.Fx.getCurrentPosition();case 5:E({latitude:(t=e.sent).coords.latitude,longitude:t.coords.longitude}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Fehler bei der Geolokalisierung:",e.t0),e.t0 instanceof Error?R(e.t0.message):R("Standort konnte nicht ermittelt werden");case 13:return e.prev=13,Z(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[0,9,13,16]])})),function(){return e.apply(this,arguments)})()},[]),(0,f.jsxs)(d.E.form,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},onSubmit:function(e){e.preventDefault();var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,p.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({searchTerm:x,date:j,time:w,guests:F},z&&{latitude:z.latitude,longitude:z.longitude});if(n)n(t);else{var r=new URLSearchParams;x&&r.append("q",x),r.append("date",j),r.append("time",w),r.append("guests",F),z&&(r.append("lat",z.latitude.toString()),r.append("lng",z.longitude.toString())),u.push("/search?".concat(r.toString()))}},className:"bg-white rounded-2xl p-6 md:p-8 lg:p-10 shadow-2xl backdrop-blur-lg border-2 border-primary-500 max-w-5xl mx-auto w-full ".concat(void 0===t?"":t),children:[(0,f.jsx)("h3",{className:"text-2xl font-bold text-secondary-800 mb-6 text-center",children:"Finde deinen Tisch"}),(0,f.jsx)("div",{className:"hidden md:block",children:(0,f.jsxs)("div",{className:"grid grid-cols-12 gap-3 lg:gap-4",children:[(0,f.jsxs)("div",{className:"md:col-span-4 lg:col-span-5 relative",children:[(0,f.jsx)("label",{htmlFor:"location-desktop",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"Standort"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.i63,{size:20})}),(0,f.jsx)("input",{id:"location-desktop",type:"text",placeholder:_?"Standort wird ermittelt...":"Wo m\xf6chtest du essen?",value:x,onChange:function(e){return y(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg",disabled:_}),P&&(0,f.jsx)("p",{className:"text-red-500 text-xs mt-1 ml-1",children:P})]}),(0,f.jsxs)("div",{className:"md:col-span-2 lg:col-span-2 relative",children:[(0,f.jsx)("label",{htmlFor:"date-desktop",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"Datum"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.vlc,{size:20})}),(0,f.jsx)("input",{id:"date-desktop",type:"date",value:j,onChange:function(e){return v(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg",min:new Date().toISOString().split("T")[0]})]}),(0,f.jsxs)("div",{className:"md:col-span-2 lg:col-span-2 relative",children:[(0,f.jsx)("label",{htmlFor:"time-desktop",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"Uhrzeit"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.TCC,{size:20})}),(0,f.jsx)("select",{id:"time-desktop",value:w,onChange:function(e){return k(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg appearance-none",children:["17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"].map(function(e){return(0,f.jsxs)("option",{value:e,className:"text-secondary-800 font-medium",children:[e," Uhr"]},e)})})]}),(0,f.jsxs)("div",{className:"md:col-span-2 lg:col-span-1 relative",children:[(0,f.jsx)("label",{htmlFor:"guests-desktop",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"G\xe4ste"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.WY8,{size:20})}),(0,f.jsx)("select",{id:"guests-desktop",value:F,onChange:function(e){return C(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg appearance-none",children:[1,2,3,4,5,6,7,8].map(function(e){return(0,f.jsx)("option",{value:e,className:"text-secondary-800 font-medium",children:e},e)})})]}),(0,f.jsxs)("div",{className:"md:col-span-2 lg:col-span-2 relative",children:[(0,f.jsx)("label",{className:"block text-sm font-bold text-transparent mb-2 ml-1 uppercase",children:"Suchen"}),(0,f.jsxs)(d.E.button,{whileHover:{scale:1.03},whileTap:{scale:.97},type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600 text-secondary-900 font-bold py-3 px-4 lg:px-8 rounded-xl flex items-center justify-center space-x-2 lg:space-x-3 transition-all shadow-xl border-2 border-primary-600 text-base lg:text-lg",children:[(0,f.jsx)(o.jRj,{size:22}),(0,f.jsx)("span",{children:"Tisch finden"})]})]})]})}),(0,f.jsxs)("div",{className:"md:hidden space-y-4",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("label",{htmlFor:"location-mobile",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"Standort"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.i63,{size:20})}),(0,f.jsx)("input",{id:"location-mobile",type:"text",placeholder:_?"Standort wird ermittelt...":"Wo m\xf6chtest du essen?",value:x,onChange:function(e){return y(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg",disabled:_}),P&&(0,f.jsx)("p",{className:"text-red-500 text-xs mt-1 ml-1",children:P})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("label",{htmlFor:"date-mobile",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"Datum"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.vlc,{size:18})}),(0,f.jsx)("input",{id:"date-mobile",type:"date",value:j,onChange:function(e){return v(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg",min:new Date().toISOString().split("T")[0]})]}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("label",{htmlFor:"time-mobile",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"Uhrzeit"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.TCC,{size:18})}),(0,f.jsx)("select",{id:"time-mobile",value:w,onChange:function(e){return k(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg appearance-none",children:["17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"].map(function(e){return(0,f.jsxs)("option",{value:e,className:"text-secondary-800 font-medium",children:[e," Uhr"]},e)})})]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("label",{htmlFor:"guests-mobile",className:"block text-sm font-bold text-secondary-800 mb-2 ml-1 uppercase",children:"G\xe4ste"}),(0,f.jsx)("div",{className:"absolute left-3 top-[calc(50%+0.5rem)] transform -translate-y-1/2 text-secondary-700",children:(0,f.jsx)(o.WY8,{size:18})}),(0,f.jsx)("select",{id:"guests-mobile",value:F,onChange:function(e){return C(e.target.value)},className:"w-full input-field pl-10 text-secondary-800 font-medium border-2 border-neutral-300 focus:border-primary-500 py-3 text-base rounded-lg appearance-none",children:[1,2,3,4,5,6,7,8].map(function(e){return(0,f.jsx)("option",{value:e,className:"text-secondary-800 font-medium",children:e},e)})})]}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("label",{className:"block text-sm font-bold text-transparent mb-2 ml-1 uppercase",children:"Suchen"}),(0,f.jsxs)(d.E.button,{whileHover:{scale:1.03},whileTap:{scale:.97},type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600 text-secondary-900 font-bold py-3 px-2 rounded-xl flex items-center justify-center space-x-1 transition-all shadow-xl border-2 border-primary-600 text-sm sm:text-base",children:[(0,f.jsx)(o.jRj,{size:18}),(0,f.jsx)("span",{children:"Tisch finden"})]})]})]})]}),(0,f.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-2 sm:gap-3 text-base text-secondary-800 font-semibold",children:[(0,f.jsxs)("span",{className:"flex items-center px-3 py-1 bg-neutral-100 rounded-full shadow-sm mb-1 sm:mb-0",children:[(0,f.jsx)(o.i63,{className:"mr-1 text-primary-500",size:16})," Beliebt:"]}),I.map(function(e){return(0,f.jsx)(d.E.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:function(){return y(e)},className:"px-4 py-2 rounded-full bg-white border-2 border-neutral-300 hover:bg-neutral-50 hover:border-primary-500 hover:text-primary-600 transition-all text-secondary-800 font-semibold shadow-md",children:e},e)})]})]})},g=r(49581),j=r(87553),v=!0;function N(e){var t,r,n,p=e.initialFavorites,b=(0,c.useRouter)(),v=(0,j.createClient)(),N=b.query,w=N.q,k=N.date,S=N.time,F=N.guests,C=N.lat,T=N.lng,z=(0,i.useState)([]),E=z[0],O=z[1],_=(0,i.useState)(w||""),Z=_[0],D=_[1],P=(0,i.useState)(k||new Date().toISOString().split("T")[0]),R=P[0],I=P[1],H=(0,i.useState)(S||"19:00"),A=H[0],M=H[1],B=(0,i.useState)(F||"2"),V=B[0],G=B[1],U=(0,i.useState)(C&&T?{latitude:Number(C),longitude:Number(T)}:null),W=U[0],q=U[1],K=(0,i.useState)(!0),L=K[0],X=K[1],Y=(0,i.useState)(0),J=Y[0],$=Y[1],Q=(0,i.useState)(1),ee=Q[0],et=Q[1],er=(0,i.useState)(1),es=er[0],ea=er[1],en=(0,i.useState)("distance"),el=en[0],ei=en[1],ec=(0,i.useState)(!1),eo=ec[0],ed=ec[1],eu=(0,i.useState)(""),em=eu[0],ex=eu[1],ep=(0,i.useState)(!1),eh=ep[0],ef=ep[1],eb=(0,i.useState)(p),ey=eb[0],eg=eb[1],ej=(0,i.useState)(!1),ev=ej[0],eN=ej[1];(0,i.useEffect)(function(){b.isReady&&ek()},[b.isReady,b.query,ee,el,em,eh]),(0,i.useEffect)(function(){W||ev||ew()},[W,ev]);var ew=(t=(0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,eN(!0),e.next=4,h.Fx.getCurrentPosition();case 4:q({latitude:(t=e.sent).coords.latitude,longitude:t.coords.longitude}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Fehler bei der Geolokalisierung:",e.t0);case 11:return e.prev=11,eN(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,8,11,14]])})),function(){return t.apply(this,arguments)}),ek=(r=(0,a.Z)(l().mark(function e(){var t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),e.prev=1,t={searchTerm:Z,date:R,time:A,guests:Number(V),page:ee,limit:10,sortBy:el,cuisine:em,offerTableToday:eh},W&&(t.latitude=W.latitude,t.longitude=W.longitude),e.next=6,h.ai.search(t);case 6:O((r=e.sent).restaurants||[]),$(r.total||0),ea(r.totalPages||1),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Fehler bei der Restaurantsuche:",e.t0),O([]),$(0),ea(1);case 18:return e.prev=18,X(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[1,12,18,21]])})),function(){return r.apply(this,arguments)}),eS=(n=(0,a.Z)(l().mark(function e(t){var r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.auth.getSession();case 2:if(e.sent.data.session){e.next=7;break}return b.push("/auth/login"),e.abrupt("return");case 7:return(r=ey.includes(t))?eg(function(e){return e.filter(function(e){return e!==t})}):eg(function(e){return[].concat((0,s.Z)(e),[t])}),e.prev=9,e.next=12,fetch("/api/users/favorites",{method:r?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({restaurantId:t})});case 12:if(e.sent.ok){e.next=15;break}throw Error("Failed to update favorite status");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error("Fehler beim Umschalten des Favoritenstatus:",e.t0),r?eg(function(e){return[].concat((0,s.Z)(e),[t])}):eg(function(e){return e.filter(function(e){return e!==t})});case 21:case"end":return e.stop()}},e,null,[[9,17]])})),function(e){return n.apply(this,arguments)});return(0,f.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,f.jsx)(m.Z,{}),(0,f.jsx)("div",{className:"bg-white shadow-md border-b sticky top-0 z-40 pt-16",children:(0,f.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,f.jsx)(y,{initialValues:{searchTerm:Z,date:R,time:A,guests:V},onSearch:function(e){D(e.searchTerm||""),I(e.date),M(e.time),G(e.guests),e.latitude&&e.longitude&&q({latitude:e.latitude,longitude:e.longitude}),et(1),ek()}}),(0,f.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-secondary-700",children:[(0,f.jsxs)("span",{className:"font-medium",children:[J," Ergebnisse"]}),Z&&(0,f.jsxs)("span",{className:"text-sm",children:['f\xfcr "',Z,'"']})]}),(0,f.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("label",{htmlFor:"sort-by",className:"block text-xs font-bold text-primary-600 mb-1",children:"Sortieren nach"}),(0,f.jsxs)("select",{id:"sort-by",value:el,onChange:function(e){return ei(e.target.value)},className:"py-2 px-3 pr-8 border border-primary-600 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,f.jsx)("option",{value:"distance",children:"Entfernung"}),(0,f.jsx)("option",{value:"rating",children:"Bewertung"}),(0,f.jsx)("option",{value:"popularity",children:"Beliebtheit"})]})]}),(0,f.jsxs)(d.E.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:function(){return ed(!0)},className:"flex items-center gap-2 py-2 px-4 bg-white border border-primary-600 rounded-lg text-sm font-medium hover:bg-primary-50",children:[(0,f.jsx)(o.Ihx,{size:16}),"Filter"]})]})]})]})}),(0,f.jsx)("div",{className:"container mx-auto px-4 py-8 flex-grow",children:(0,f.jsx)("div",{className:"space-y-6",children:(0,f.jsx)(u.M,{mode:"wait",children:L?(0,f.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center h-64",children:(0,f.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})},"loading"):0===E.length?(0,f.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto",children:[(0,f.jsx)("div",{className:"w-16 h-16 bg-neutral-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,f.jsx)(o.jRj,{className:"w-8 h-8 text-neutral-400"})}),(0,f.jsx)("h3",{className:"text-xl font-medium text-secondary-800 mb-2",children:"Keine Restaurants gefunden"}),(0,f.jsx)("p",{className:"text-primary-600",children:"Versuche es mit anderen Suchkriterien oder einem anderen Standort."})]},"empty"):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(function(e,t){return(0,f.jsx)(g.Z,{restaurant:e,isFavorite:ey.includes(e.id),onFavoriteToggle:eS,showDistance:!0},e.id)})}),es>1&&(0,f.jsx)("div",{className:"flex justify-center mt-12",children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)("button",{onClick:function(){return et(function(e){return Math.max(e-1,1)})},disabled:1===ee,className:"px-4 py-2 rounded-lg border ".concat(1===ee?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-white text-primary-800 hover:bg-primary-50"),children:"Zur\xfcck"}),Array.from({length:es},function(e,t){return t+1}).map(function(e){return(0,f.jsx)("button",{onClick:function(){return et(e)},className:"w-10 h-10 rounded-lg ".concat(ee===e?"bg-secondary-500 text-white":"bg-white text-primary-800 hover:bg-primary-50"),children:e},e)}),(0,f.jsx)("button",{onClick:function(){return et(function(e){return Math.min(e+1,es)})},disabled:ee===es,className:"px-4 py-2 rounded-lg border ".concat(ee===es?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-white text-primary-800 hover:bg-primary-50"),children:"Weiter"})]})})]})})})}),(0,f.jsx)(u.M,{children:eo&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:function(){return ed(!1)}}),(0,f.jsxs)(d.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},className:"fixed bottom-0 inset-x-0 bg-white rounded-t-2xl p-6 z-50 max-w-lg mx-auto shadow-2xl",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,f.jsx)("h3",{className:"text-xl font-bold text-secondary-800",children:"Filter"}),(0,f.jsx)("button",{onClick:function(){return ed(!1)},className:"p-2 rounded-full hover:bg-primary-700",children:(0,f.jsx)(o.q5L,{size:20})})]}),(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"cuisine",className:"block text-sm font-medium text-secondary-700 mb-2",children:"K\xfcche"}),(0,f.jsxs)("select",{id:"cuisine",value:em,onChange:function(e){return ex(e.target.value)},className:"w-full p-3 border border-primary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,f.jsx)("option",{value:"",children:"Alle K\xfcchen"}),(0,f.jsx)("option",{value:"Deutsch",children:"Deutsch"}),(0,f.jsx)("option",{value:"Italienisch",children:"Italienisch"}),(0,f.jsx)("option",{value:"Asiatisch",children:"Asiatisch"}),(0,f.jsx)("option",{value:"Amerikanisch",children:"Amerikanisch"}),(0,f.jsx)("option",{value:"Mediterran",children:"Mediterran"}),(0,f.jsx)("option",{value:"Indisch",children:"Indisch"}),(0,f.jsx)("option",{value:"Vegetarisch",children:"Vegetarisch"}),(0,f.jsx)("option",{value:"Vegan",children:"Vegan"})]})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("input",{type:"checkbox",id:"offer-today",checked:eh,onChange:function(e){return ef(e.target.checked)},className:"w-5 h-5 text-primary-500 border-primary-600 rounded focus:ring-primary-500"}),(0,f.jsx)("label",{htmlFor:"offer-today",className:"ml-2 text-sm font-medium text-secondary-700",children:"Nur Restaurants, die heute Tische anbieten"})]}),(0,f.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,f.jsx)("button",{onClick:function(){ex(""),ef(!1),ei("distance"),et(1),ed(!1),ek()},className:"px-4 py-2 border border-primary-600 rounded-lg text-secondary-700 hover:bg-primary-50",children:"Zur\xfccksetzen"}),(0,f.jsx)("button",{onClick:function(){et(1),ed(!1),ek()},className:"px-6 py-2 bg-secondary-500 text-secondary-900 font-medium rounded-lg hover:bg-secondary-600 shadow-md",children:"Filter anwenden"})]})]})]})]})}),(0,f.jsx)(x.Z,{})]})}},8266:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(50944)}])},14666:function(e,t,r){"use strict";function s(e){if(Array.isArray(e))return e}r.d(t,{Z:function(){return s}})},14882:function(e,t,r){"use strict";function s(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{Z:function(){return s}})},17674:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(14666),a=r(2937),n=r(14882);function l(e,t){return(0,s.Z)(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s,a,n,l,i=[],c=!0,o=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=n.call(r)).done)&&(i.push(s.value),i.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(o)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,n.Z)()}}},function(e){e.O(0,[6130,3365,6058,6405,8428,300,6308,3708,5502,2888,9774,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);