(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4822],{17662:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(41664),s=r.n(n),i=r(25675),a=r.n(i),l=r(91472),c=r(41338),o=r(5802);function d(){return(0,o.jsx)("footer",{className:"bg-gradient-to-br from-neutral-900 to-neutral-800 text-neutral-300",children:(0,o.jsxs)("div",{className:"container mx-auto py-16 px-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)(s(),{href:"/",className:"inline-block",children:(0,o.jsx)("div",{className:"flex items-center space-x-3 group",children:(0,o.jsx)("div",{className:"h-12 bg-white p-2 rounded-lg overflow-hidden relative",children:(0,o.jsx)(a(),{src:"/images/logo-fixed/Logo CT quer 4c.webp",alt:"Contact Tables Logo",width:120,height:40,className:"transition-all group-hover:scale-105",priority:!0,style:{objectFit:"contain",width:"auto",height:"100%"},quality:100})})})}),(0,o.jsx)("p",{className:"text-neutral-400 leading-relaxed",children:"Wir verbinden Menschen am Restauranttisch â€“ f\xfcr echte Begegnungen und inspirierende Gespr\xe4che."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Entdecken"}),(0,o.jsxs)("ul",{className:"space-y-4",children:[(0,o.jsx)("li",{children:(0,o.jsxs)(s(),{href:"/restaurants",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,o.jsx)(l.i63,{className:"group-hover:translate-x-1 transition-transform"}),(0,o.jsx)("span",{children:"Restaurants finden"})]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(s(),{href:"/about",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,o.jsx)(l.WY8,{className:"group-hover:translate-x-1 transition-transform"}),(0,o.jsx)("span",{children:"\xdcber uns"})]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(s(),{href:"/restaurant/register",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,o.jsx)(l.i63,{className:"group-hover:translate-x-1 transition-transform"}),(0,o.jsx)("span",{children:"Restaurant anmelden"})]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(s(),{href:"/events",className:"flex items-center space-x-2 text-neutral-400 hover:text-primary-400 transition-colors group",children:[(0,o.jsx)(l.TCC,{className:"group-hover:translate-x-1 transition-transform"}),(0,o.jsx)("span",{children:"Events & Aktionen"})]})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Rechtliches"}),(0,o.jsxs)("ul",{className:"space-y-4",children:[(0,o.jsx)("li",{children:(0,o.jsx)(s(),{href:"/datenschutz",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Datenschutzerkl\xe4rung"})}),(0,o.jsx)("li",{children:(0,o.jsx)(s(),{href:"/faq",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"FAQ"})}),(0,o.jsx)("li",{children:(0,o.jsx)(s(),{href:"/impressum",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Impressum"})}),(0,o.jsx)("li",{children:(0,o.jsx)(s(),{href:"/barrierefreiheit",className:"text-neutral-400 hover:text-primary-400 transition-colors",children:"Barrierefreiheit"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 border-b border-neutral-700 pb-3",children:"Kontakt"}),(0,o.jsxs)("ul",{className:"space-y-4",children:[(0,o.jsx)("li",{className:"group",children:(0,o.jsxs)("a",{href:"tel:+4915679640069",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,o.jsx)(l.tUt,{size:16})}),(0,o.jsx)("span",{children:"+49 15679 640069"})]})}),(0,o.jsx)("li",{className:"group",children:(0,o.jsxs)(s(),{href:"/contact",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,o.jsx)(l.Imn,{size:16})}),(0,o.jsx)("span",{children:"Nachricht absenden"})]})}),(0,o.jsx)("li",{className:"group",children:(0,o.jsxs)("a",{href:"https://www.facebook.com/contacttables/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,o.jsx)(c.tBk,{size:16})}),(0,o.jsx)("span",{children:"Facebook"})]})}),(0,o.jsx)("li",{className:"group",children:(0,o.jsxs)("a",{href:"https://www.instagram.com/contacttables/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-neutral-400 hover:text-primary-400 transition-colors",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-800 group-hover:bg-primary-700 flex items-center justify-center transition-all duration-300",children:(0,o.jsx)(c.Zf_,{size:16})}),(0,o.jsx)("span",{children:"Instagram"})]})})]})]})]}),(0,o.jsx)("div",{className:"border-t border-neutral-800 mt-16 pt-8 text-center",children:(0,o.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,o.jsxs)("p",{className:"text-neutral-500",children:["\xa9 ",new Date().getFullYear()," contact-tables. Alle Rechte vorbehalten."]}),(0,o.jsxs)("p",{className:"flex items-center text-neutral-500",children:[(0,o.jsx)("span",{children:"Made with"})," ",(0,o.jsx)(l.$aX,{className:"mx-2 text-primary-500"})," ",(0,o.jsx)("span",{children:"in Germany"})]})]})})]})})}},71376:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(92401),s=r(41664),i=r.n(s),a=r(11163),l=r(91472),c=r(5802);function o(e){var t=e.activeItem,r=void 0===t?"dashboard":t;(0,a.useRouter)();var s=(0,n.useState)(!1),o=s[0],d=s[1],u=[{icon:l.m6D,label:"Dashboard",id:"dashboard",path:"/restaurant/dashboard"},{icon:l.vPQ,label:"Profil bearbeiten",id:"profile",path:"/restaurant/dashboard/profile"},{icon:l.LFN,label:"Bilder verwalten",id:"images",path:"/restaurant/dashboard/images"},{icon:l.vlc,label:"Contact Tables",id:"tables",path:"/restaurant/dashboard/tables"},{icon:l.WY8,label:"Reservierungen",id:"reservations",path:"/restaurant/dashboard/reservations"},{icon:l.XiQ,label:"Abonnement",id:"subscription",path:"/restaurant/dashboard/subscription"},{icon:l.NOg,label:"Vertrag & Dokumente",id:"documents",path:"/restaurant/dashboard/documents"},{icon:l.nbt,label:"Einstellungen",id:"settings",path:"/restaurant/dashboard/settings"}];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"fixed bottom-4 right-4 md:hidden z-30",children:(0,c.jsx)("button",{onClick:function(){return d(!o)},className:"bg-primary-600 text-white p-3 rounded-full shadow-lg",children:o?(0,c.jsx)(l.q5L,{size:24}):(0,c.jsx)(l.cur,{size:24})})}),o&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",style:{pointerEvents:"auto"},children:(0,c.jsxs)("div",{className:"fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-30 overflow-y-auto",children:[(0,c.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Restaurant"}),(0,c.jsx)("button",{onClick:function(){return d(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,c.jsx)(l.q5L,{size:24})})]})}),(0,c.jsx)("nav",{className:"p-4",children:(0,c.jsx)("ul",{className:"space-y-2",children:u.map(function(e){var t=e.icon,n=r===e.id;return(0,c.jsx)("li",{children:(0,c.jsxs)(i(),{href:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(n?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),onClick:function(){return d(!1)},children:[(0,c.jsx)(t,{size:20}),(0,c.jsx)("span",{children:e.label})]})},e.id)})})})]})}),(0,c.jsx)("aside",{className:"hidden md:block w-64 bg-white shadow-md min-h-screen pt-20",children:(0,c.jsx)("nav",{className:"p-4",children:(0,c.jsx)("ul",{className:"space-y-2",children:u.map(function(e){var t=e.icon,n=r===e.id;return(0,c.jsx)("li",{children:(0,c.jsxs)(i(),{href:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(n?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:[(0,c.jsx)(t,{size:20}),(0,c.jsx)("span",{children:e.label})]})},e.id)})})})})]})}},69968:function(e,t,r){"use strict";r.r(t),r.d(t,{NotificationProvider:function(){return u},useNotification:function(){return d}});var n=r(90116),s=r(92401),i=r(13114),a=r(89681),l=r(91472),c=r(5802),o=(0,s.createContext)(void 0),d=function(){var e=(0,s.useContext)(o);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},u=function(e){var t=e.children,r=(0,s.useState)([]),i=r[0],a=r[1],l=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=Date.now().toString();a(function(i){return[].concat((0,n.Z)(i),[{id:s,type:e,message:t,duration:r}])}),r>0&&setTimeout(function(){d(s)},r)},d=function(e){a(function(t){return t.filter(function(t){return t.id!==e})})};return(0,c.jsxs)(o.Provider,{value:{notifications:i,addNotification:l,removeNotification:d,clearNotifications:function(){a([])},handleError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ein Fehler ist aufgetreten";console.error(e);var r=t;if(null!=e&&e.message&&(r=e.message),null!=e&&e.error_description&&(r=e.error_description),null!=e&&e.code)switch(e.code){case"PGRST301":r="Keine Berechtigung f\xfcr diese Aktion";break;case"auth/invalid-email":r="Ung\xfcltige E-Mail-Adresse";break;case"23505":r="Dieser Eintrag existiert bereits";break;case"23503":r="Der Eintrag kann nicht gel\xf6scht werden, da er noch referenziert wird"}l("error",r)}},children:[t,(0,c.jsx)(m,{notifications:i,removeNotification:d})]})},m=function(e){var t=e.notifications,r=e.removeNotification;return(0,c.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:(0,c.jsx)(i.M,{children:t.map(function(e){return(0,c.jsxs)(a.E.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.2},className:"p-4 rounded-lg shadow-lg flex items-start gap-3 ".concat("success"===e.type?"bg-green-50 border-l-4 border-green-500":"error"===e.type?"bg-red-50 border-l-4 border-red-500":"warning"===e.type?"bg-yellow-50 border-l-4 border-yellow-500":"bg-blue-50 border-l-4 border-blue-500"),children:[(0,c.jsxs)("div",{className:"flex-shrink-0",children:["success"===e.type&&(0,c.jsx)(l._rq,{className:"text-green-500",size:20}),"error"===e.type&&(0,c.jsx)(l.bcx,{className:"text-red-500",size:20}),"warning"===e.type&&(0,c.jsx)(l.bcx,{className:"text-yellow-500",size:20}),"info"===e.type&&(0,c.jsx)(l.H33,{className:"text-blue-500",size:20})]}),(0,c.jsx)("div",{className:"flex-1",children:(0,c.jsx)("p",{className:"text-sm font-medium ".concat("success"===e.type?"text-green-800":"error"===e.type?"text-red-800":"warning"===e.type?"text-yellow-800":"text-blue-800"),children:e.message})}),(0,c.jsx)("button",{onClick:function(){return r(e.id)},className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,c.jsx)(l.q5L,{size:18})})]},e.id)})})})}},40711:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return b}});var n=r(59499),s=r(50029),i=r(64687),a=r.n(i),l=r(92401),c=r(86405),o=r(63708),d=r(17662),u=r(71376),m=r(91472),h=r(69968),x=r(5802);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=!0;t.default=function(e){var t,r,i,p,b=e.restaurant,g=e.initialReservations,v=e.totalCount,j=e.totalPages,y=e.error,N=(0,l.useState)(g),w=N[0],k=N[1],E=(0,l.useState)(!1),S=E[0],_=E[1],C=(0,h.useNotification)(),z=C.addNotification,P=C.handleError,O=(0,l.useState)(null),D=O[0],R=O[1],T=(0,l.useState)(!1),I=T[0],F=T[1],M=(0,l.useState)(null),A=M[0],q=M[1],L=(0,l.useState)(""),Z=L[0],B=L[1],U=(0,l.useState)(!1),H=U[0],J=U[1],V=(0,l.useState)([]),G=V[0],W=V[1],X=(0,l.useState)(null),$=X[0],Q=X[1],Y=(0,l.useState)(1),K=Y[0];Y[1];var ee=(0,l.useState)(10),et=ee[0];ee[1];var er=(0,l.useState)(void 0===j?1:j),en=(er[0],er[1]),es=(0,l.useState)(void 0===v?0:v),ei=(es[0],es[1]);(0,l.useEffect)(function(){y&&z("error",y,8e3)},[y]);var ea=(0,l.useState)({title:"",description:"",date:"",time:"",maxParticipants:0,status:"OPEN"}),el=ea[0],ec=ea[1],eo=(0,c.createBrowserClient)("https://efmbzrmroyetcqxcwxka.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbWJ6cm1yb3lldGNxeGN3eGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjkzNDgsImV4cCI6MjA2MzMwNTM0OH0.ohJQapQUce_nuK0Ra30WUQGfchrSG3ZTx43jxV0f0I4");(0,l.useEffect)(function(){if(D){var e=new Date(D.datetime);ec({title:D.title||"",description:D.description||"",date:e.toISOString().split("T")[0],time:e.toTimeString().slice(0,5),maxParticipants:D.max_participants||0,status:D.status}),F(!0)}},[D]);var ed=(t=(0,s.Z)(a().mark(function e(){var t,r,n,s,i,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=K,r=et,_(!0),n=2,s=0,i=!1,l=a().mark(function e(){var l,c,o,d,u,m,h,x,p,g,v,j,y,N,E;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eo.from("contact_tables").select("id",{count:"exact"}).eq("restaurant_id",b.id);case 3:if(c=(l=e.sent).count,!(o=l.error)){e.next=8;break}throw o;case 8:return u=Math.ceil((d=c||0)/r),ei(d),en(u||1),h=(m=(t-1)*r)+r-1,e.next=16,eo.from("contact_tables").select("*").eq("restaurant_id",b.id).order("datetime",{ascending:!1}).range(m,h);case 16:if(p=(x=e.sent).data,!(g=x.error)){e.next=21;break}throw g;case 21:if(!(!p||0===p.length)){e.next=25;break}return k([]),i=!0,e.abrupt("return",0);case 25:return v=p.map(function(e){return e.id}),e.next=28,eo.from("participations").select("user_id, status, contact_table_id, profiles!inner(email, first_name, last_name)").in("contact_table_id",v);case 28:if(y=(j=e.sent).data,!(N=j.error)){e.next=38;break}if(!(s<n)){e.next=37;break}return s++,e.next=36,new Promise(function(e){return setTimeout(e,1e3)});case 36:return e.abrupt("return",0);case 37:throw Error("Fehler beim Laden der Teilnehmer: ".concat(N.message));case 38:E=null==y?void 0:y.reduce(function(e,t){var r=t.contact_table_id;return e[r]||(e[r]=[]),e[r].push(t),e},{}),k(w.map(function(e){return f(f({},e),{},{participants:E[e.id]||[]})})),i=!0,e.next=56;break;case 44:if(e.prev=44,e.t0=e.catch(0),s++,console.error("Fehler beim Laden der Reservierungen (Versuch ".concat(s,"/").concat(n,"):"),e.t0),!(s<n)){e.next=53;break}return e.next=51,new Promise(function(e){return setTimeout(e,1e3)});case 51:e.next=56;break;case 53:console.error("Fehler beim Laden der Reservierungen:",e.t0),P(e.t0,"Fehler beim Laden der Reservierungen. Bitte versuchen Sie es sp\xe4ter erneut."),i=!0;case 56:case"end":return e.stop()}},e,null,[[0,44]])});case 7:if(!(s<=n&&!i)){e.next=14;break}return e.delegateYield(l(),"t0",9);case 9:if(0!==e.t0){e.next=12;break}return e.abrupt("continue",7);case 12:e.next=7;break;case 14:_(!1);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,l.useEffect)(function(){ed()},[K,et,b.id]),(0,l.useMemo)(function(){return w},[w]),(0,s.Z)(a().mark(function e(t,r){var n,s,i,l,c,o,d,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eo.from("participations").select("user_id, profiles!inner(email)").eq("contact_table_id",t);case 3:if(s=(n=e.sent).data,!(i=n.error)){e.next=8;break}throw i;case 8:if(!(!s||0===s.length)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,eo.from("contact_tables").select("title, datetime").eq("id",t).single();case 12:if(c=(l=e.sent).data,!(o=l.error)){e.next=17;break}throw o;case 17:return d=s.map(function(e){return{user_id:e.user_id,title:"Reservierungsstatus ge\xe4ndert: ".concat(c.title),message:"Der Status Ihrer Reservierung f\xfcr ".concat(c.title," am ").concat(new Date(c.datetime).toLocaleDateString("de-DE")," wurde auf ").concat(ep(r)," ge\xe4ndert."),type:"RESERVATION_UPDATE",read:!1,created_at:new Date().toISOString()}}),e.next=20,eo.from("notifications").insert(d);case 20:if(!(u=e.sent.error)){e.next=24;break}throw u;case 24:return e.abrupt("return",!0);case 27:return e.prev=27,e.t0=e.catch(0),console.error("Fehler beim Senden von Benachrichtigungen:",e.t0),e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,null,[[0,27]])}));var eu=function(){var e={};if(el.title.trim()?el.title.trim().length<3?e.title="Titel muss mindestens 3 Zeichen lang sein":el.title.trim().length>100&&(e.title="Titel darf maximal 100 Zeichen lang sein"):e.title="Titel ist erforderlich",el.date){var t=new Date;t.setHours(0,0,0,0);var r=new Date(el.date);r.setHours(0,0,0,0),isNaN(r.getTime())?e.date="Ung\xfcltiges Datumsformat":r<t&&(e.date="Datum kann nicht in der Vergangenheit liegen")}else e.date="Datum ist erforderlich";return el.time?/^([01]\d|2[0-3]):([0-5]\d)$/.test(el.time)?new Date("".concat(el.date,"T").concat(el.time,":00"))<new Date&&(e.time="Datum und Uhrzeit k\xf6nnen nicht in der Vergangenheit liegen"):e.time="Ung\xfcltiges Uhrzeitformat (HH:MM)":e.time="Uhrzeit ist erforderlich",el.maxParticipants<=0?e.maxParticipants="Anzahl der Teilnehmer muss gr\xf6\xdfer als 0 sein":el.maxParticipants>100&&(e.maxParticipants="Maximale Teilnehmerzahl ist 100"),e},em=(r=(0,s.Z)(a().mark(function e(t){var r,n,s,i,l,c,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),D){e.next=3;break}return e.abrupt("return");case 3:if(!(Object.keys(r=eu()).length>0)){e.next=8;break}return z("error",Object.values(r).join("\n"),8e3),e.abrupt("return");case 8:return _(!0),e.prev=9,n=new Date("".concat(el.date,"T").concat(el.time,":00")),e.next=14,eo.from("contact_tables").select("id, title, datetime").eq("restaurant_id",b.id).neq("id",D.id).gte("datetime",new Date(n.getTime()-18e5).toISOString()).lte("datetime",new Date(n.getTime()+18e5).toISOString());case 14:if(i=(s=e.sent).data,!(l=s.error)){e.next=19;break}throw l;case 19:if(!(i&&i.length>0)){e.next=26;break}return Q({title:el.title.trim(),description:el.description.trim(),datetime:n.toISOString(),max_participants:el.maxParticipants,status:el.status}),W(i),J(!0),_(!1),e.abrupt("return");case 26:return c={title:el.title.trim(),description:el.description.trim(),datetime:n.toISOString(),max_participants:el.maxParticipants,status:el.status},e.next=29,eo.from("contact_tables").update(c).eq("id",D.id).eq("restaurant_id",b.id);case 29:if(!(o=e.sent.error)){e.next=33;break}throw o;case 33:return e.next=35,ed();case 35:z("success","Reservierung erfolgreich aktualisiert",5e3),F(!1),R(null),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(9),P(e.t0,"Fehler beim Aktualisieren der Reservierung");case 43:return e.prev=43,_(!1),e.finish(43);case 46:case"end":return e.stop()}},e,null,[[9,40,43,46]])})),function(e){return r.apply(this,arguments)}),eh=function(e){var t=e.target,r=t.name,s=t.value;ec(function(e){return f(f({},e),{},(0,n.Z)({},r,s))})},ex=(i=(0,s.Z)(a().mark(function e(t){var r,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=3;break}return z("error","Bitte geben Sie eine E-Mail-Adresse ein",5e3),e.abrupt("return");case 3:return _(!0),e.prev=4,e.next=7,fetch("/api/contact-tables/".concat(t,"/participants"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:Z})});case 7:return r=e.sent,e.next=10,r.json();case 10:if(n=e.sent,r.ok){e.next=13;break}throw Error(n.error||"Fehler beim Hinzuf\xfcgen des Teilnehmers");case 13:return e.next=15,ed();case 15:z("success","Teilnehmer erfolgreich hinzugef\xfcgt",5e3),B(""),q(null),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),console.error("Fehler beim Hinzuf\xfcgen des Teilnehmers:",e.t0),P(e.t0,"Fehler beim Hinzuf\xfcgen des Teilnehmers");case 24:return e.prev=24,_(!1),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[4,20,24,27]])})),function(e){return i.apply(this,arguments)}),ep=function(e){switch(e){case"OPEN":return"Offen";case"CONFIRMED":return"Best\xe4tigt";case"CANCELLED":return"Abgesagt";case"COMPLETED":return"Abgeschlossen";default:return e}},ef=(p=(0,s.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!D||!$)){e.next=2;break}return e.abrupt("return");case 2:return _(!0),e.prev=3,e.next=6,eo.from("contact_tables").update($).eq("id",D.id).eq("restaurant_id",b.id);case 6:if(!(t=e.sent.error)){e.next=10;break}throw t;case 10:return e.next=12,ed();case 12:z("success","Reservierung erfolgreich aktualisiert",5e3),F(!1),R(null),J(!1),Q(null),W([]),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),P(e.t0,"Fehler beim Aktualisieren der Reservierung");case 23:return e.prev=23,_(!1),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[3,20,23,26]])})),function(){return p.apply(this,arguments)});return(0,x.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,x.jsx)(o.Z,{}),(0,x.jsxs)("div",{className:"flex flex-1 pt-16",children:[(0,x.jsx)(u.Z,{activeItem:"reservations"}),(0,x.jsx)("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:(0,x.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Ihre Reservierungen"}),(0,x.jsx)("button",{onClick:function(){return ed()},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",disabled:S,children:"Aktualisieren"})]}),S&&(0,x.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),!S&&0===w.length&&(0,x.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsx)(m.H33,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,x.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Sie haben noch keine Reservierungen."}),(0,x.jsx)("p",{className:"text-gray-400 mt-2",children:"Erstellen Sie Contact Tables, damit Kunden Reservierungen vornehmen k\xf6nnen."})]})]})})]}),I&&(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Reservierung bearbeiten"}),(0,x.jsxs)("form",{onSubmit:em,children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Titel"}),(0,x.jsx)("input",{type:"text",id:"title",name:"title",value:el.title,onChange:eh,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Beschreibung"}),(0,x.jsx)("textarea",{id:"description",name:"description",value:el.description,onChange:eh,rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Datum"}),(0,x.jsx)("input",{type:"date",id:"date",name:"date",value:el.date,onChange:eh,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Uhrzeit"}),(0,x.jsx)("input",{type:"time",id:"time",name:"time",value:el.time,onChange:eh,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"maxParticipants",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max. Teilnehmer"}),(0,x.jsx)("input",{type:"number",id:"maxParticipants",name:"maxParticipants",value:el.maxParticipants,onChange:eh,min:"2",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,x.jsxs)("select",{id:"status",name:"status",value:el.status,onChange:eh,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,x.jsx)("option",{value:"OPEN",children:"Offen"}),(0,x.jsx)("option",{value:"CONFIRMED",children:"Best\xe4tigt"}),(0,x.jsx)("option",{value:"CANCELLED",children:"Abgesagt"}),(0,x.jsx)("option",{value:"COMPLETED",children:"Abgeschlossen"})]})]})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,x.jsx)("button",{type:"button",onClick:function(){F(!1),R(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Abbrechen"}),(0,x.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",disabled:S,children:S?"Wird gespeichert...":"Speichern"})]})]})]})})}),A&&(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,x.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,x.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Teilnehmer hinzuf\xfcgen"}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("label",{htmlFor:"participantEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-Mail des Teilnehmers"}),(0,x.jsx)("input",{type:"email",id:"participantEmail",value:Z,onChange:function(e){return B(e.target.value)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"teilnehmer@beispiel.de",required:!0})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,x.jsx)("button",{type:"button",onClick:function(){q(null),B("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Abbrechen"}),(0,x.jsx)("button",{type:"button",onClick:function(){return ex(A)},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",disabled:S||!Z,children:S?"Wird hinzugef\xfcgt...":"Hinzuf\xfcgen"})]})]})}),H&&(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,x.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,x.jsx)("h3",{className:"text-xl font-bold mb-4 text-red-600",children:"Zeitkonflikt erkannt"}),(0,x.jsx)("p",{className:"mb-4",children:"Es existieren bereits folgende Reservierungen im gew\xe4hlten Zeitfenster:"}),(0,x.jsx)("ul",{className:"mb-4 bg-gray-100 p-3 rounded max-h-40 overflow-y-auto",children:G.map(function(e){return(0,x.jsxs)("li",{className:"mb-2 pb-2 border-b border-gray-300 last:border-0",children:[(0,x.jsx)("strong",{children:e.title})," - ",new Date(e.datetime).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]},e.id)})}),(0,x.jsx)("p",{className:"mb-6",children:"M\xf6chten Sie die Reservierung trotzdem speichern?"}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)("button",{onClick:function(){J(!1),Q(null),W([]),z("info","Reservierungs\xe4nderung abgebrochen",5e3)},className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded transition-colors",disabled:S,children:"Abbrechen"}),(0,x.jsx)("button",{onClick:ef,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded transition-colors",disabled:S,children:"Trotzdem speichern"})]})]})}),(0,x.jsx)(d.Z,{})]})}},73616:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/restaurant/dashboard/reservations",function(){return r(40711)}])},11163:function(e,t,r){e.exports=r(11171)},13114:function(e,t,r){"use strict";r.d(t,{M:function(){return g}});var n=r(5802),s=r(92401),i=r(25364),a=r(96681),l=r(58868),c=r(240),o=r(93243),d=r(16014);class u extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,o.R)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:t,anchorX:r,root:i}){let a=(0,s.useId)(),l=(0,s.useRef)(null),c=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,s.useContext)(d._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:n,top:s,left:d,right:u}=c.current;if(t||!l.current||!e||!n)return;let m="left"===r?`left: ${d}`:`right: ${u}`;l.current.dataset.motionPopId=a;let h=document.createElement("style");o&&(h.nonce=o);let x=i??document.head;return x.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            ${m}px !important;
            top: ${s}px !important;
          }
        `),()=>{x.contains(h)&&x.removeChild(h)}},[t]),(0,n.jsx)(u,{isPresent:t,childRef:l,sizeRef:c,children:s.cloneElement(e,{ref:l})})}let h=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:l,presenceAffectsLayout:o,mode:d,anchorX:u,root:h})=>{let p=(0,a.h)(x),f=(0,s.useId)(),b=!0,g=(0,s.useMemo)(()=>(b=!1,{id:f,initial:t,isPresent:r,custom:l,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;i&&i()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[r,p,i]);return o&&b&&(g={...g}),(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[r]),s.useEffect(()=>{r||p.size||!i||i()},[r]),"popLayout"===d&&(e=(0,n.jsx)(m,{isPresent:r,anchorX:u,root:h,children:e})),(0,n.jsx)(c.O.Provider,{value:g,children:e})};function x(){return new Map}var p=r(15947);let f=e=>e.key||"";function b(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:t,initial:r=!0,onExitComplete:c,presenceAffectsLayout:o=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",root:x})=>{let[g,v]=(0,p.oO)(u),j=(0,s.useMemo)(()=>b(e),[e]),y=u&&!g?[]:j.map(f),N=(0,s.useRef)(!0),w=(0,s.useRef)(j),k=(0,a.h)(()=>new Map),[E,S]=(0,s.useState)(j),[_,C]=(0,s.useState)(j);(0,l.L)(()=>{N.current=!1,w.current=j;for(let e=0;e<_.length;e++){let t=f(_[e]);y.includes(t)?k.delete(t):!0!==k.get(t)&&k.set(t,!1)}},[_,y.length,y.join("-")]);let z=[];if(j!==E){let e=[...j];for(let t=0;t<_.length;t++){let r=_[t],n=f(r);y.includes(n)||(e.splice(t,0,r),z.push(r))}return"wait"===d&&z.length&&(e=z),C(b(e)),S(j),null}let{forceRender:P}=(0,s.useContext)(i.p);return(0,n.jsx)(n.Fragment,{children:_.map(e=>{let s=f(e),i=(!u||!!g)&&(j===_||y.includes(s));return(0,n.jsx)(h,{isPresent:i,initial:(!N.current||!!r)&&void 0,custom:t,presenceAffectsLayout:o,mode:d,root:x,onExitComplete:i?void 0:()=>{if(!k.has(s))return;k.set(s,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(P?.(),C(w.current),u&&v?.(),c&&c())},anchorX:m,children:e},s)})})}}},function(e){e.O(0,[6130,3365,6058,6405,8428,300,3708,2888,9774,179],function(){return e(e.s=73616)}),_N_E=e.O()}]);