(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8179],{25133:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var n=t(59499),s=t(50029),a=t(64687),i=t.n(a),c=t(11163),o=t(41664),l=t.n(o),d=t(92401),u=t(63708),m=t(17662),x=t(26073),h=t(89681),f=t(91472),p=t(65289),g=t(83596),b=t(5802);function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function y(){var e,r=(0,p.useAuth)(),t=r.session,n=r.user,a=r.loading,o=(0,c.useRouter)(),v=(0,d.useState)(!0),y=v[0],w=v[1],N=(0,d.useState)(!0),k=N[0],O=N[1],_=(0,d.useState)(null),S=(_[0],_[1]),Z=(0,d.useState)([]),P=Z[0],C=Z[1],F=(0,d.useState)([]),I=F[0],K=F[1],E=(0,d.useState)(1),R=E[0],T=E[1],D=(0,d.useState)(5),M=D[0];D[1];var z=(0,d.useState)(1),U=z[0],L=z[1],A=(0,d.useState)(0),J=A[0],W=A[1],q=(0,d.useState)(1),B=q[0],G=q[1],X=(0,d.useState)(5),Q=X[0];X[1];var V=(0,d.useState)(1),Y=V[0],H=V[1],$=(0,d.useState)(0),ee=$[0],er=$[1],et=(e=(0,s.Z)(i().mark(function e(){var r,a,c,o,l,d,u,m,x,h,f,p,b,v,y,w,N,k,_,Z,P,F,I,E,T,D,z,U;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||!n)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(!0),S(null),e.prev=5,e.next=8,g.supabase.from("participations").select("contact_table_id").eq("user_id",n.id);case 8:if(a=(r=e.sent).data,!(c=r.error)){e.next=15;break}console.error("Fehler beim Laden der Teilnahmen:",c),e.next=43;break;case 15:if(!(a&&a.length>0)){e.next=40;break}return o=a.map(function(e){return e.contact_table_id}),e.next=19,g.supabase.from("contact_tables").select("id",{count:"exact"}).in("id",o);case 19:return d=(l=e.sent).count,(u=l.error)?console.error("Fehler beim Z\xe4hlen der Kontakttische:",u):(x=Math.ceil((m=d||0)/M),W(m),L(x||1)),f=(h=(R-1)*M)+M-1,e.next=27,g.supabase.from("contact_tables").select("\n              *,\n              restaurant:restaurant_id(*)\n            ").in("id",o).order("datetime",{ascending:!0}).range(h,f);case 27:if(b=(p=e.sent).data,!(v=p.error)){e.next=34;break}console.error("Fehler beim Laden der Kontakttische:",v),e.next=38;break;case 34:return e.next=36,Promise.all((b||[]).map(function(){var e=(0,s.Z)(i().mark(function e(r){var t,n,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.supabase.from("participations").select("user_id").eq("contact_table_id",r.id);case 2:if(n=(t=e.sent).data,!(s=t.error)){e.next=8;break}return console.error("Fehler beim Laden der Teilnehmer f\xfcr Tisch ".concat(r.id,":"),s),e.abrupt("return",j(j({},r),{},{participants:[]}));case 8:return e.abrupt("return",j(j({},r),{},{participants:n||[]}));case 9:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()));case 36:C(e.sent);case 38:e.next=43;break;case 40:C([]),W(0),L(1);case 43:e.next=51;break;case 45:e.prev=45,e.t0=e.catch(5),console.error("Fehler beim Laden der anstehenden Tische:",e.t0),C([]),W(0),L(1);case 51:return e.prev=51,e.next=54,g.supabase.from("favorites").select("restaurant_id").eq("user_id",n.id);case 54:if(w=(y=e.sent).data,!(N=y.error)){e.next=61;break}console.error("Fehler beim Laden der Favoriten:",N),e.next=82;break;case 61:if(!(w&&w.length>0)){e.next=79;break}return k=w.map(function(e){return e.restaurant_id}),e.next=65,g.supabase.from("contact_tables").select("id",{count:"exact"}).in("restaurant_id",k);case 65:return Z=(_=e.sent).count,(P=_.error)?console.error("Fehler beim Z\xe4hlen der favorisierten Kontakttische:",P):(I=Math.ceil((F=Z||0)/Q),er(F),H(I||1)),T=(E=(B-1)*Q)+Q-1,e.next=73,g.supabase.from("contact_tables").select("\n              *,\n              restaurant:restaurant_id(*)\n            ").in("restaurant_id",k).order("datetime",{ascending:!0}).range(E,T);case 73:z=(D=e.sent).data,(U=D.error)?console.error("Fehler beim Laden der favorisierten Kontakttische:",U):K(z||[]),e.next=82;break;case 79:K([]),er(0),H(1);case 82:e.next=90;break;case 84:e.prev=84,e.t1=e.catch(51),console.error("Fehler beim Laden der Favoriten:",e.t1),K([]),er(0),H(1);case 90:O(!1),e.next=98;break;case 93:e.prev=93,e.t2=e.catch(2),console.error("Fehler beim Laden der Daten:",e.t2),S("Ein unerwarteter Fehler ist aufgetreten. Bitte versuche es sp\xe4ter erneut."),O(!1);case 98:case"end":return e.stop()}},e,null,[[2,93],[5,45],[51,84]])})),function(){return e.apply(this,arguments)}),en=function(e){e>=1&&e<=U&&T(e)},es=function(){R<U&&T(R+1)},ea=function(){R>1&&T(R-1)},ei=function(e){e>=1&&e<=Y&&G(e)},ec=function(){B<Y&&G(B+1)},eo=function(){B>1&&G(B-1)};if((0,d.useEffect)(function(){if(!a){if(!t){o.push("/auth/login");return}if(n)try{var e,r=(((null===(e=n.user_metadata)||void 0===e?void 0:e.role)||"")+"").toUpperCase();if("CUSTOMER"!==r&&"USER"!==r){o.push("/");return}w(!1),et()}catch(e){console.error("Fehler bei der Rollenpr\xfcfung:",e),w(!1)}else w(!1)}},[t,n,a,o]),(0,d.useEffect)(function(){n&&!y&&et()},[R,M,B,Q]),y)return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,b.jsx)(u.Z,{}),(0,b.jsxs)("div",{className:"flex-grow flex",children:[(0,b.jsx)(x.Z,{activePage:"dashboard"}),(0,b.jsx)("main",{className:"flex-grow bg-gray-50 p-6",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})})})})]}),(0,b.jsx)(m.Z,{})]});var el=function(e){var r=new Date(e);return{date:r.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),start_time:r.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}};return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,b.jsx)(u.Z,{}),(0,b.jsxs)("div",{className:"flex-grow flex",children:[(0,b.jsx)(x.Z,{activePage:"dashboard"}),(0,b.jsx)("main",{className:"flex-grow bg-gray-50 p-6",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsx)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:y?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mein Dashboard"}),(0,b.jsx)(l(),{href:"/contact-tables",children:(0,b.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,b.jsx)(f.nae,{className:"mr-2"}),"Neue Kontakttische entdecken"]})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(0,b.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,b.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3",children:(0,b.jsx)(f.vlc,{className:"h-6 w-6 text-white"})}),(0,b.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Anstehende Kontakttische"}),(0,b.jsx)("dd",{children:(0,b.jsx)("div",{className:"text-lg font-medium text-gray-900",children:J})})]})})]})})})}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Anstehende Kontakttische"}),k?(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6",children:(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})})}):0===P.length?(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6",children:(0,b.jsxs)("div",{className:"text-center text-gray-500",children:[(0,b.jsx)("p",{children:"Keine anstehenden Kontakttische gefunden."}),(0,b.jsx)("p",{className:"mt-2",children:"Melde dich f\xfcr Kontakttische an, um sie hier zu sehen."})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,b.jsx)("ul",{className:"divide-y divide-gray-200",children:P.map(function(e){var r,t,n=el(e.datetime||new Date().toISOString()),s=n.date,a=n.start_time;return(0,b.jsx)("li",{children:(0,b.jsx)(l(),{href:"/contact-tables/".concat(e.id),className:"block hover:bg-gray-50",children:(0,b.jsxs)("div",{className:"px-4 py-4 sm:px-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-indigo-600 truncate",children:e.title}),(0,b.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,b.jsxs)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[(null===(r=e.participants)||void 0===r?void 0:r.length)||0,"/",e.max_participants," Teilnehmer"]})})]}),(0,b.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,b.jsx)("div",{className:"sm:flex",children:(0,b.jsxs)("p",{className:"flex items-center text-sm text-gray-500",children:[(0,b.jsx)(f.i63,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),(null===(t=e.restaurant)||void 0===t?void 0:t.name)||"Unbekanntes Restaurant"]})}),(0,b.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[(0,b.jsx)(f.TCC,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),(0,b.jsxs)("p",{children:[s," um ",a]})]})]})]})})},e.id)})})}),P.length>0&&(0,b.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,b.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,b.jsx)("button",{onClick:ea,disabled:1===R,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ".concat(1===R?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:"Zur\xfcck"}),(0,b.jsx)("button",{onClick:es,disabled:R===U,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ".concat(R===U?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:"Weiter"})]}),(0,b.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["Zeige ",(0,b.jsx)("span",{className:"font-medium",children:P.length>0?(R-1)*M+1:0})," bis ",(0,b.jsx)("span",{className:"font-medium",children:Math.min(R*M,J)})," von ",(0,b.jsx)("span",{className:"font-medium",children:J})," Kontakttischen"]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,b.jsxs)("button",{onClick:ea,disabled:1===R,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 ".concat(1===R?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,b.jsx)("span",{className:"sr-only",children:"Zur\xfcck"}),(0,b.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:U},function(e,r){return r+1}).map(function(e){return(0,b.jsx)("button",{onClick:function(){return en(e)},className:"relative inline-flex items-center px-4 py-2 border border-gray-300 ".concat(e===R?"bg-indigo-50 text-indigo-600 font-medium":"bg-white text-gray-500 hover:bg-gray-50"),children:e},"upcoming-page-".concat(e))}),(0,b.jsxs)("button",{onClick:es,disabled:R===U,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 ".concat(R===U?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,b.jsx)("span",{className:"sr-only",children:"Weiter"}),(0,b.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Favorisierte Kontakttische"}),k?(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6",children:(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})})}):0===I.length?(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6",children:(0,b.jsxs)("div",{className:"text-center text-gray-500",children:[(0,b.jsx)("p",{children:"Keine favorisierten Kontakttische gefunden."}),(0,b.jsx)("p",{className:"mt-2",children:"F\xfcge Kontakttische zu deinen Favoriten hinzu, um sie hier zu sehen."})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,b.jsx)("ul",{className:"divide-y divide-gray-200",children:I.map(function(e){var r,t,n=el(e.datetime||new Date().toISOString()),s=n.date,a=n.start_time;return(0,b.jsx)("li",{children:(0,b.jsx)(l(),{href:"/contact-tables/".concat(e.id),className:"block hover:bg-gray-50",children:(0,b.jsxs)("div",{className:"px-4 py-4 sm:px-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-indigo-600 truncate",children:e.title}),(0,b.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,b.jsxs)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[(null===(r=e.participants)||void 0===r?void 0:r.length)||0,"/",e.max_participants," Teilnehmer"]})})]}),(0,b.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,b.jsx)("div",{className:"sm:flex",children:(0,b.jsxs)("p",{className:"flex items-center text-sm text-gray-500",children:[(0,b.jsx)(f.i63,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),(null===(t=e.restaurant)||void 0===t?void 0:t.name)||"Unbekanntes Restaurant"]})}),(0,b.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[(0,b.jsx)(f.TCC,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),(0,b.jsxs)("p",{children:[s," um ",a]})]})]})]})})},e.id)})})}),I.length>0&&(0,b.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,b.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,b.jsx)("button",{onClick:eo,disabled:1===B,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ".concat(1===B?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:"Zur\xfcck"}),(0,b.jsx)("button",{onClick:ec,disabled:B===Y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ".concat(B===Y?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:"Weiter"})]}),(0,b.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["Zeige ",(0,b.jsx)("span",{className:"font-medium",children:I.length>0?(B-1)*Q+1:0})," bis ",(0,b.jsx)("span",{className:"font-medium",children:Math.min(B*Q,ee)})," von ",(0,b.jsx)("span",{className:"font-medium",children:ee})," Kontakttischen"]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,b.jsxs)("button",{onClick:eo,disabled:1===B,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 ".concat(1===B?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,b.jsx)("span",{className:"sr-only",children:"Zur\xfcck"}),(0,b.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Y},function(e,r){return r+1}).map(function(e){return(0,b.jsx)("button",{onClick:function(){return ei(e)},className:"relative inline-flex items-center px-4 py-2 border border-gray-300 ".concat(e===B?"bg-indigo-50 text-indigo-600 font-medium":"bg-white text-gray-500 hover:bg-gray-50"),children:e},"favorite-page-".concat(e))}),(0,b.jsxs)("button",{onClick:ec,disabled:B===Y,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 ".concat(B===Y?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-500 hover:bg-gray-50"),children:[(0,b.jsx)("span",{className:"sr-only",children:"Weiter"}),(0,b.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]})]}),(0,b.jsx)("div",{className:"mt-8 flex justify-center",children:(0,b.jsx)(l(),{href:"/contact-tables",children:(0,b.jsx)("button",{type:"button",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Alle Kontakttische anzeigen"})})})]})})})})]}),(0,b.jsx)(m.Z,{})]})}},83596:function(e,r,t){"use strict";t.r(r),t.d(r,{admin:function(){return Z},auth:function(){return O},profiles:function(){return _},restaurants:function(){return S},supabase:function(){return k}});var n,s,a,i,c,o,l,d,u,m,x,h,f=t(59499),p=t(50029),g=t(64687),b=t.n(g),v=t(86405);function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach(function(r){(0,f.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var w="https://efmbzrmroyetcqxcwxka.supabase.co",N="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbWJ6cm1yb3lldGNxeGN3eGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjkzNDgsImV4cCI6MjA2MzMwNTM0OH0.ohJQapQUce_nuK0Ra30WUQGfchrSG3ZTx43jxV0f0I4";w&&N||console.error("Kritischer Fehler: Supabase URL oder Anon Key fehlen in der Client-Konfiguration.");var k=(0,v.createBrowserClient)(w,N,{auth:{storageKey:"contact-tables-auth",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),O={signUp:(n=(0,p.Z)(b().mark(function e(r,t){var n,s,a,i,c=arguments;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,k.auth.signUp({email:r,password:t,options:{data:y(y({},n),{},{role:n.role||"CUSTOMER"})}});case 3:return a=(s=e.sent).data,i=s.error,e.abrupt("return",{data:a,error:i});case 7:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)}),signIn:(s=(0,p.Z)(b().mark(function e(r,t){var n,s,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signInWithPassword({email:r,password:t});case 2:return s=(n=e.sent).data,a=n.error,e.abrupt("return",{data:s,error:a});case 6:case"end":return e.stop()}},e)})),function(e,r){return s.apply(this,arguments)}),signInWithGoogle:(a=(0,p.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signInWithOAuth({provider:"google",options:{redirectTo:(null==r?void 0:r.redirectTo)||"".concat(window.location.origin,"/auth/callback")}});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),signOut:(i=(0,p.Z)(b().mark(function e(){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.signOut();case 2:return r=e.sent.error,e.abrupt("return",{error:r});case 5:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)}),getUser:(c=(0,p.Z)(b().mark(function e(){var r,t,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.getUser();case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)}),getSession:(o=(0,p.Z)(b().mark(function e(){var r,t,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.getSession();case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),resetPassword:(l=(0,p.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.resetPasswordForEmail(r,{redirectTo:"https://contact-tables.org/auth/reset-password"});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)}),updatePassword:(d=(0,p.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.auth.updateUser({password:r});case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)})},_={getProfile:(u=(0,p.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").select("*").eq("id",r).single();case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),updateProfile:(m=(0,p.Z)(b().mark(function e(r,t){var n,s,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").update(t).eq("id",r);case 2:return s=(n=e.sent).data,a=n.error,e.abrupt("return",{data:s,error:a});case 6:case"end":return e.stop()}},e)})),function(e,r){return m.apply(this,arguments)})},S={getRestaurantProfile:(x=(0,p.Z)(b().mark(function e(r){var t,n,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("restaurants").select("*").eq("user_id",r).single();case 2:return n=(t=e.sent).data,s=t.error,e.abrupt("return",{data:n,error:s});case 6:case"end":return e.stop()}},e)})),function(e){return x.apply(this,arguments)})},Z={getAllUsers:(h=(0,p.Z)(b().mark(function e(){var r,t,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("profiles").select("*");case 2:return t=(r=e.sent).data,n=r.error,e.abrupt("return",{data:t,error:n});case 6:case"end":return e.stop()}},e)})),function(){return h.apply(this,arguments)})}},95354:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/customer/dashboard",function(){return t(25133)}])}},function(e){e.O(0,[6130,3365,6058,6405,8428,300,3708,6328,2888,9774,179],function(){return e(e.s=95354)}),_N_E=e.O()}]);