2025-08-13T22:40:08.967Z: API Route /api/restaurant/upload-images called, Method: POST
2025-08-13T22:40:08.968Z: Creating Supabase server client using shared utility...
2025-08-13T22:40:08.969Z: Getting user from Supabase...
2025-08-13T22:40:09.100Z: User authenticated: 51ce6ebb-c478-447e-ae43-f463b5f42139
2025-08-13T22:40:09.100Z: Parsing form data...
2025-08-13T22:40:09.109Z: {
  "message": "--- Image Upload Request ---",
  "restaurantId": "33d03dfc-6c4b-4867-8e3c-98887ea7facf",
  "fileCount": 1
}
2025-08-13T22:40:09.109Z: Verifying restaurant ownership...
2025-08-13T22:40:09.168Z: Ownership verified.
2025-08-13T22:40:09.168Z: Processing file: WhatsApp Image 2025-07-15 at 21.30.11.jpeg
2025-08-13T22:40:09.169Z: Uploading WhatsApp Image 2025-07-15 at 21.30.11.jpeg to Supabase Storage at path: 33d03dfc-6c4b-4867-8e3c-98887ea7facf/592dc02b-4f72-4af0-b21b-19f5c1318f1f
2025-08-13T22:40:09.554Z: Upload to storage successful.
2025-08-13T22:40:09.554Z: Getting public URL...
2025-08-13T22:40:09.555Z: Public URL: https://efmbzrmroyetcqxcwxka.supabase.co/storage/v1/object/public/restaurant-bilder/33d03dfc-6c4b-4867-8e3c-98887ea7facf/592dc02b-4f72-4af0-b21b-19f5c1318f1f
2025-08-13T22:40:09.555Z: Inserting DB record for WhatsApp Image 2025-07-15 at 21.30.11.jpeg. Is primary: true
2025-08-13T22:40:09.626Z: DB insert successful.
2025-08-13T22:40:09.627Z: This is the primary image. Updating restaurant table for ID: 33d03dfc-6c4b-4867-8e3c-98887ea7facf
2025-08-13T22:40:09.690Z: Restaurant table updated with new primary image URL and visibility.
2025-08-13T22:40:09.690Z: Image upload process completed successfully.
